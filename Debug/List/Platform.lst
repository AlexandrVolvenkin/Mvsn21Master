###############################################################################
#
# IAR C/C++ Compiler V7.10.6.1378 for Atmel AVR           13/Apr/2022  19:24:10
# Copyright 1996-2018 IAR Systems AB.
#
#    Source file  =  D:\Projects\CautoProjects\Mvsn21\Mvsn21\src\Platform.cpp
#    Command line =  
#        -f C:\Users\ghost\AppData\Local\Temp\EW828E.tmp
#        (--string_literals_in_flash
#        D:\Projects\CautoProjects\Mvsn21\Mvsn21\src\Platform.cpp --cpu=m48 -ms
#        -o D:\Projects\CautoProjects\Mvsn21\Mvsn21\Debug\Obj -lCN
#        D:\Projects\CautoProjects\Mvsn21\Mvsn21\Debug\List
#        --initializers_in_flash --root_variables --no_cse --no_inline
#        --no_code_motion --no_cross_call --no_clustering --no_tbaa --debug
#        -DENABLE_BIT_DEFINITIONS -e -I
#        D:\Projects\CautoProjects\Mvsn21\Mvsn21\include\ --eeprom_size 256
#        --dlib --dlib_config "C:\Program Files (x86)\IAR Systems\Embedded
#        Workbench 8.0\avr\LIB\DLIB\dlAVR-1s-ec_mul-n.h" -On --eec++)
#    Locale       =  Russian_RUS.1251
#    List file    =  
#        D:\Projects\CautoProjects\Mvsn21\Mvsn21\Debug\List\Platform.lst
#    Object file  =  
#        D:\Projects\CautoProjects\Mvsn21\Mvsn21\Debug\Obj\Platform.r90
#
###############################################################################

D:\Projects\CautoProjects\Mvsn21\Mvsn21\src\Platform.cpp
      1          //-----------------------------------------------------------------------------------------------------
      2          //  Source      : FileName.cpp
      3          //  Created     : 01.06.2022
      4          //  Author      : Alexandr Volvenkin
      5          //  email       : aav-36@mail.ru
      6          //  GitHub      : https://github.com/AlexandrVolvenkin
      7          //-----------------------------------------------------------------------------------------------------
      8          #include "Platform.h"

   \                                 In  segment ABSOLUTE, at 0xc6, root
   \   union <unnamed> volatile __io _A_UDR0
   \                     _A_UDR0:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0xc4, root
   \   union <unnamed> volatile __io _A_UBRR0
   \                     _A_UBRR0:
   \   00000000                      DS8 2

   \                                 In  segment ABSOLUTE, at 0xc2, root
   \   union <unnamed> volatile __io _A_UCSR0C
   \                     _A_UCSR0C:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0xc1, root
   \   union <unnamed> volatile __io _A_UCSR0B
   \                     _A_UCSR0B:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0xc0, root
   \   union <unnamed> volatile __io _A_UCSR0A
   \                     _A_UCSR0A:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0xbd, root
   \   union <unnamed> volatile __io _A_TWAMR
   \                     _A_TWAMR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0xbc, root
   \   union <unnamed> volatile __io _A_TWCR
   \                     _A_TWCR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0xbb, root
   \   union <unnamed> volatile __io _A_TWDR
   \                     _A_TWDR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0xba, root
   \   union <unnamed> volatile __io _A_TWAR
   \                     _A_TWAR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0xb9, root
   \   union <unnamed> volatile __io _A_TWSR
   \                     _A_TWSR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0xb8, root
   \   union <unnamed> volatile __io _A_TWBR
   \                     _A_TWBR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0xb6, root
   \   union <unnamed> volatile __io _A_ASSR
   \                     _A_ASSR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0xb4, root
   \   union <unnamed> volatile __io _A_OCR2B
   \                     _A_OCR2B:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0xb3, root
   \   union <unnamed> volatile __io _A_OCR2A
   \                     _A_OCR2A:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0xb2, root
   \   union <unnamed> volatile __io _A_TCNT2
   \                     _A_TCNT2:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0xb1, root
   \   union <unnamed> volatile __io _A_TCCR2B
   \                     _A_TCCR2B:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0xb0, root
   \   union <unnamed> volatile __io _A_TCCR2A
   \                     _A_TCCR2A:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x8a, root
   \   union <unnamed> volatile __io _A_OCR1B
   \                     _A_OCR1B:
   \   00000000                      DS8 2

   \                                 In  segment ABSOLUTE, at 0x88, root
   \   union <unnamed> volatile __io _A_OCR1A
   \                     _A_OCR1A:
   \   00000000                      DS8 2

   \                                 In  segment ABSOLUTE, at 0x86, root
   \   union <unnamed> volatile __io _A_ICR1
   \                     _A_ICR1:
   \   00000000                      DS8 2

   \                                 In  segment ABSOLUTE, at 0x84, root
   \   union <unnamed> volatile __io _A_TCNT1
   \                     _A_TCNT1:
   \   00000000                      DS8 2

   \                                 In  segment ABSOLUTE, at 0x82, root
   \   union <unnamed> volatile __io _A_TCCR1C
   \                     _A_TCCR1C:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x81, root
   \   union <unnamed> volatile __io _A_TCCR1B
   \                     _A_TCCR1B:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x80, root
   \   union <unnamed> volatile __io _A_TCCR1A
   \                     _A_TCCR1A:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x7f, root
   \   union <unnamed> volatile __io _A_DIDR1
   \                     _A_DIDR1:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x7e, root
   \   union <unnamed> volatile __io _A_DIDR0
   \                     _A_DIDR0:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x7c, root
   \   union <unnamed> volatile __io _A_ADMUX
   \                     _A_ADMUX:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x7b, root
   \   union <unnamed> volatile __io _A_ADCSRB
   \                     _A_ADCSRB:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x7a, root
   \   union <unnamed> volatile __io _A_ADCSRA
   \                     _A_ADCSRA:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x78, root
   \   union <unnamed> volatile __io _A_ADC
   \                     _A_ADC:
   \   00000000                      DS8 2

   \                                 In  segment ABSOLUTE, at 0x70, root
   \   union <unnamed> volatile __io _A_TIMSK2
   \                     _A_TIMSK2:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x6f, root
   \   union <unnamed> volatile __io _A_TIMSK1
   \                     _A_TIMSK1:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x6e, root
   \   union <unnamed> volatile __io _A_TIMSK0
   \                     _A_TIMSK0:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x6d, root
   \   union <unnamed> volatile __io _A_PCMSK2
   \                     _A_PCMSK2:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x6c, root
   \   union <unnamed> volatile __io _A_PCMSK1
   \                     _A_PCMSK1:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x6b, root
   \   union <unnamed> volatile __io _A_PCMSK0
   \                     _A_PCMSK0:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x69, root
   \   union <unnamed> volatile __io _A_EICRA
   \                     _A_EICRA:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x68, root
   \   union <unnamed> volatile __io _A_PCICR
   \                     _A_PCICR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x66, root
   \   union <unnamed> volatile __io _A_OSCCAL
   \                     _A_OSCCAL:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x64, root
   \   union <unnamed> volatile __io _A_PRR
   \                     _A_PRR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x61, root
   \   union <unnamed> volatile __io _A_CLKPR
   \                     _A_CLKPR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x60, root
   \   union <unnamed> volatile __io _A_WDTCSR
   \                     _A_WDTCSR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x5f, root
   \   union <unnamed> volatile __io _A_SREG
   \                     _A_SREG:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x5d, root
   \   union <unnamed> volatile __io _A_SP
   \                     _A_SP:
   \   00000000                      DS8 2

   \                                 In  segment ABSOLUTE, at 0x57, root
   \   union <unnamed> volatile __io _A_SPMCSR
   \                     _A_SPMCSR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x55, root
   \   union <unnamed> volatile __io _A_MCUCR
   \                     _A_MCUCR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x54, root
   \   union <unnamed> volatile __io _A_MCUSR
   \                     _A_MCUSR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x53, root
   \   union <unnamed> volatile __io _A_SMCR
   \                     _A_SMCR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x50, root
   \   union <unnamed> volatile __io _A_ACSR
   \                     _A_ACSR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x4e, root
   \   union <unnamed> volatile __io _A_SPDR
   \                     _A_SPDR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x4d, root
   \   union <unnamed> volatile __io _A_SPSR
   \                     _A_SPSR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x4c, root
   \   union <unnamed> volatile __io _A_SPCR
   \                     _A_SPCR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x4b, root
   \   union <unnamed> volatile __io _A_GPIOR2
   \                     _A_GPIOR2:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x4a, root
   \   union <unnamed> volatile __io _A_GPIOR1
   \                     _A_GPIOR1:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x48, root
   \   union <unnamed> volatile __io _A_OCR0B
   \                     _A_OCR0B:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x47, root
   \   union <unnamed> volatile __io _A_OCR0A
   \                     _A_OCR0A:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x46, root
   \   union <unnamed> volatile __io _A_TCNT0
   \                     _A_TCNT0:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x45, root
   \   union <unnamed> volatile __io _A_TCCR0B
   \                     _A_TCCR0B:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x44, root
   \   union <unnamed> volatile __io _A_TCCR0A
   \                     _A_TCCR0A:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x43, root
   \   union <unnamed> volatile __io _A_GTCCR
   \                     _A_GTCCR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x41, root
   \   union <unnamed> volatile __io _A_EEAR
   \                     _A_EEAR:
   \   00000000                      DS8 2

   \                                 In  segment ABSOLUTE, at 0x40, root
   \   union <unnamed> volatile __io _A_EEDR
   \                     _A_EEDR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x3f, root
   \   union <unnamed> volatile __io _A_EECR
   \                     _A_EECR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x3e, root
   \   union <unnamed> volatile __io _A_GPIOR0
   \                     _A_GPIOR0:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x3d, root
   \   union <unnamed> volatile __io _A_EIMSK
   \                     _A_EIMSK:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x3c, root
   \   union <unnamed> volatile __io _A_EIFR
   \                     _A_EIFR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x3b, root
   \   union <unnamed> volatile __io _A_PCIFR
   \                     _A_PCIFR:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x37, root
   \   union <unnamed> volatile __io _A_TIFR2
   \                     _A_TIFR2:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x36, root
   \   union <unnamed> volatile __io _A_TIFR1
   \                     _A_TIFR1:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x35, root
   \   union <unnamed> volatile __io _A_TIFR0
   \                     _A_TIFR0:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x2b, root
   \   union <unnamed> volatile __io _A_PORTD
   \                     _A_PORTD:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x2a, root
   \   union <unnamed> volatile __io _A_DDRD
   \                     _A_DDRD:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x29, root
   \   union <unnamed> volatile __io _A_PIND
   \                     _A_PIND:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x28, root
   \   union <unnamed> volatile __io _A_PORTC
   \                     _A_PORTC:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x27, root
   \   union <unnamed> volatile __io _A_DDRC
   \                     _A_DDRC:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x26, root
   \   union <unnamed> volatile __io _A_PINC
   \                     _A_PINC:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x25, root
   \   union <unnamed> volatile __io _A_PORTB
   \                     _A_PORTB:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x24, root
   \   union <unnamed> volatile __io _A_DDRB
   \                     _A_DDRB:
   \   00000000                      DS8 1

   \                                 In  segment ABSOLUTE, at 0x23, root
   \   union <unnamed> volatile __io _A_PINB
   \                     _A_PINB:
   \   00000000                      DS8 1

   \                                 In  segment CODE, align 2, keep-with-next
   \   __version_3 void CSpi::DataExchangeInProgressClear()
   \                     ??DataExchangeInProgressClear:
   \   00000000   E000               LDI     R16, 0
   \   00000002   9300....           STS     ??m_bfDataExchangeInProgress, R16
   \   00000006   9508               RET

   \                                 In  segment CODE, align 2, keep-with-next
   \   __version_3 void CSpi::DataExchangeInProgressSet()
   \                     ??DataExchangeInProgressSet:
   \   00000000   E001               LDI     R16, 1
   \   00000002   9300....           STS     ??m_bfDataExchangeInProgress, R16
   \   00000006   9508               RET

   \                                 In  segment CODE, align 2, keep-with-next
   \   __version_3 void CSpi::DataExchangeIsOccurSet()
   \                     ??DataExchangeIsOccurSet:
   \   00000000   E001               LDI     R16, 1
   \   00000002   9300....           STS     ??m_bfDataExchangeIsOccur, R16
   \   00000006   9508               RET

   \                                 In  segment CODE, align 2, keep-with-next
   \   __version_3 void CPlatform::IncrementSystemTick()
   \                     ??IncrementSystemTick:
   \   00000000   ....               LDI     R30, LOW(??m_uiSystemTick)
   \   00000002   ....               LDI     R31, (??m_uiSystemTick) >> 8
   \   00000004   8100               LD      R16, Z
   \   00000006   8111               LDD     R17, Z+1
   \   00000008   5F0F               SUBI    R16, 255
   \   0000000A   4F1F               SBCI    R17, 255
   \   0000000C   8300               ST      Z, R16
   \   0000000E   8311               STD     Z+1, R17
   \   00000010   9508               RET

   \                                 In  segment CODE, align 2, keep-with-next
   \   __version_3 void CPlatform::StatusLedSetPinOutput()
   \                     ??StatusLedSetPinOutput:
   \   00000000   9A53               SBI     0x0A, 0x03
   \   00000002   9508               RET
   \   00000004                      REQUIRE _A_DDRD

   \                                 In  segment CODE, align 2, keep-with-next
   \   __version_3 void CPlatform::TxLedSetPinOutput()
   \                     ??TxLedSetPinOutput:
   \   00000000   9A53               SBI     0x0A, 0x03
   \   00000002   9508               RET
   \   00000004                      REQUIRE _A_DDRD

   \                                 In  segment CODE, align 2, keep-with-next
   \   __version_3 void CPlatform::TxLedOn()
   \                     ??TxLedOn:
   \   00000000   985B               CBI     0x0B, 0x03
   \   00000002   9508               RET
   \   00000004                      REQUIRE _A_PORTD

   \                                 In  segment CODE, align 2, keep-with-next
   \   __version_3 void CPlatform::TxLedOff()
   \                     ??TxLedOff:
   \   00000000   9A5B               SBI     0x0B, 0x03
   \   00000002   9508               RET
   \   00000004                      REQUIRE _A_PORTD
      9          #include "Mvsn21.h"

   \                                 In  segment CODE, align 2, keep-with-next
   \   __version_3 void CMvsn21::FlowControlSet(uint8_t)
   \                     ??FlowControlSet:
   \   00000000   9300....           STS     ??m_uiFlowControl, R16
   \   00000004   9508               RET

   \                                 In  segment CODE, align 2, keep-with-next
   \   __version_3 void CMvsn21::MeasureFlowControlSet(uint8_t)
   \                     ??MeasureFlowControlSet:
   \   00000000   9300....           STS     ??m_uiMeasureFlowControl, R16
   \   00000004   9508               RET
     10          
     11          // ATMega48
     12          

   \                                 In  segment NEAR_Z, align 1, keep-with-next, root
   \   00000000                      REQUIRE `?<Segment init: NEAR_Z>`
     13          bool CAdc::m_fbMeasureIsComlete;
   \                     ??m_fbMeasureIsComlete:
   \   00000000                      DS8 1
     14          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
     15          CAdc::CAdc()
   \                     ??CAdc:
     16          {
   \   00000000   ....               LDI     R18, LOW(??__vtbl)
   \   00000002   ....               LDI     R19, (??__vtbl) >> 8
   \   00000004   01F8               MOVW    R31:R30, R17:R16
   \   00000006   8320               ST      Z, R18
   \   00000008   8331               STD     Z+1, R19
     17          
     18          }
   \   0000000A   9508               RET
     19          
     20          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
     21          CAdc::~CAdc()
   \                     `?~CAdc`:
     22          {
   \   00000000   ....               RCALL   ?PROLOGUE2_L09
   \   00000002   01C8               MOVW    R25:R24, R17:R16
   \   00000004   2F08               MOV     R16, R24
   \   00000006   2B09               OR      R16, R25
   \   00000008   F021               BREQ    `?~CAdc_1`
   \   0000000A   FB20               BST     R18, 0
   \   0000000C   F416               BRTC    `?~CAdc_1`
     23          
     24          }
   \   0000000E   018C               MOVW    R17:R16, R25:R24
   \   00000010   ....               RCALL   `??operator delete`
   \                     `?~CAdc_1`:
   \   00000012   E0E2               LDI     R30, 2
   \   00000014   ....               RJMP    ?EPILOGUE_B2_L09
     25          
     26          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
     27          void CAdc::Init(void)
   \                     ??Init:
     28          {
     29              // Отключаем цифровые входные буферы на линиях АЦП.
     30              DIDR0  = 0x3F;
   \   00000000   E30F               LDI     R16, 63
   \   00000002   9300....           STS     _A_DIDR0, R16
     31              // SCK/128
     32              ADCSRA = CAdc::DIV128;
   \   00000006   E007               LDI     R16, 7
   \   00000008   9300....           STS     _A_ADCSRA, R16
     33              ADCSRB = 0x00;
   \   0000000C   E000               LDI     R16, 0
   \   0000000E   9300....           STS     _A_ADCSRB, R16
     34              // Внутренний источник опорного напряжения Vref = 1.1V
     35              ADMUX = (BIT(REFS1) | BIT(REFS0));
   \   00000012   EC00               LDI     R16, 192
   \   00000014   9300....           STS     _A_ADMUX, R16
     36          }
   \   00000018   9508               RET
   \   0000001A                      REQUIRE _A_DIDR0
   \   0000001A                      REQUIRE _A_ADCSRA
   \   0000001A                      REQUIRE _A_ADCSRB
   \   0000001A                      REQUIRE _A_ADMUX
     37          
     38          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
     39          void CAdc::ChannelSelect(uint8_t uiChannel)
   \                     ??ChannelSelect:
     40          {
     41              ADMUX &= ~(uiChannel & 0x0F);
   \   00000000   2F10               MOV     R17, R16
   \   00000002   701F               ANDI    R17, 0x0F
   \   00000004   9510               COM     R17
   \   00000006   9120....           LDS     R18, _A_ADMUX
   \   0000000A   2321               AND     R18, R17
   \   0000000C   9320....           STS     _A_ADMUX, R18
     42              ADMUX |= (uiChannel & 0x0F);
   \   00000010   2F10               MOV     R17, R16
   \   00000012   701F               ANDI    R17, 0x0F
   \   00000014   9120....           LDS     R18, _A_ADMUX
   \   00000018   2B21               OR      R18, R17
   \   0000001A   9320....           STS     _A_ADMUX, R18
     43          }
   \   0000001E   9508               RET
   \   00000020                      REQUIRE _A_ADMUX
     44          
     45          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
     46          void CAdc::StartSingle(void)
   \                     ??StartSingle:
     47          {
     48              // Отключаем режим пониженного энергопотребления.
     49              PRR &= ~BIT(PRADC);
   \   00000000   91000064           LDS     R16, 100
   \   00000004   7F0E               ANDI    R16, 0xFE
   \   00000006   93000064           STS     100, R16
     50              // Включаем АЦП.
     51              ADCSRA |= (BIT(ADEN) | BIT(ADIE) | BIT(ADSC));
   \   0000000A   9100....           LDS     R16, _A_ADCSRA
   \   0000000E   6C08               ORI     R16, 0xC8
   \   00000010   9300....           STS     _A_ADCSRA, R16
     52          }
   \   00000014   9508               RET
   \   00000016                      REQUIRE _A_PRR
   \   00000016                      REQUIRE _A_ADCSRA
     53          
     54          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
     55          void CAdc::Start(void)
   \                     ??Start:
     56          {
     57              // Включаем АЦП.
     58          //    ADCSRA |= (BIT(ADEN) | BIT(ADIE) | BIT(ADSC));
     59              ADCSRA |= (BIT(ADEN) | BIT(ADSC));
   \   00000000   9100....           LDS     R16, _A_ADCSRA
   \   00000004   6C00               ORI     R16, 0xC0
   \   00000006   9300....           STS     _A_ADCSRA, R16
     60          }
   \   0000000A   9508               RET
   \   0000000C                      REQUIRE _A_ADCSRA
     61          
     62          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
     63          void CAdc::Stop(void)
   \                     ??Stop:
     64          {
     65              // Выключаем АЦП.
     66              ADCSRA &= ~(BIT(ADEN) | BIT(ADIE) | BIT(ADSC));
   \   00000000   9100....           LDS     R16, _A_ADCSRA
   \   00000004   7307               ANDI    R16, 0x37
   \   00000006   9300....           STS     _A_ADCSRA, R16
     67          }
   \   0000000A   9508               RET
   \   0000000C                      REQUIRE _A_ADCSRA
     68          
     69          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
     70          void CAdc::Disable(void)
   \                     ??Disable:
     71          {
     72              // Выключаем АЦП.
     73              ADCSRA &= ~(BIT(ADEN) | BIT(ADIE) | BIT(ADSC));
   \   00000000   9100....           LDS     R16, _A_ADCSRA
   \   00000004   7307               ANDI    R16, 0x37
   \   00000006   9300....           STS     _A_ADCSRA, R16
     74              // Включаем режим пониженного энергопотребления.
     75              PRR |= BIT(PRADC);
   \   0000000A   91000064           LDS     R16, 100
   \   0000000E   6001               ORI     R16, 0x01
   \   00000010   93000064           STS     100, R16
     76          }
   \   00000014   9508               RET
   \   00000016                      REQUIRE _A_ADCSRA
   \   00000016                      REQUIRE _A_PRR
     77          
     78          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
     79          void CAdc::Enable(void)
   \                     ??Enable:
     80          {
     81              // Отключаем режим пониженного энергопотребления.
     82              PRR &= ~BIT(PRADC);
   \   00000000   91000064           LDS     R16, 100
   \   00000004   7F0E               ANDI    R16, 0xFE
   \   00000006   93000064           STS     100, R16
     83              // Включаем АЦП.
     84          //    ADCSRA |= (BIT(ADEN) | BIT(ADIE));
     85              ADCSRA |= BIT(ADEN);
   \   0000000A   9100007A           LDS     R16, 122
   \   0000000E   6800               ORI     R16, 0x80
   \   00000010   9300007A           STS     122, R16
     86          }
   \   00000014   9508               RET
   \   00000016                      REQUIRE _A_PRR
   \   00000016                      REQUIRE _A_ADCSRA
     87          
     88          ////-----------------------------------------------------------------------------------------------------
     89          //#pragma vector = ADC_vect
     90          //__interrupt void CAdc::SIG_ADC(void)
     91          //{
     92          //    m_fbMeasureIsComlete = true;
     93          //}
     94          ////-----------------------------------------------------------------------------------------------------
     95          
     96          
     97          
     98          
     99          
    100          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
    101          CUart::CUart()
   \                     ??CUart:
    102          {
   \   00000000   ....               LDI     R18, LOW(??__vtbl_1)
   \   00000002   ....               LDI     R19, (??__vtbl_1) >> 8
   \   00000004   01F8               MOVW    R31:R30, R17:R16
   \   00000006   8F25               STD     Z+29, R18
   \   00000008   8F36               STD     Z+30, R19
    103          
    104          }
   \   0000000A   9508               RET
    105          
    106          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
    107          CUart::CUart(volatile uint8_t *ubrrh, volatile uint8_t *ubrrl,
   \                     ??CUart_1:
    108                       volatile uint8_t *ucsra, volatile uint8_t *ucsrb,
    109                       volatile uint8_t *ucsrc, volatile uint8_t *udr,
    110                       volatile uint8_t *rs485ddr, volatile uint8_t rs485ddpin,
    111                       volatile uint8_t *rs485port, volatile uint8_t rs485pin) :
   \   00000000   ....               RCALL   ?PROLOGUE10_L09
   \   00000002                      REQUIRE ?Register_R4_is_cg_reg
   \   00000002                      REQUIRE ?Register_R5_is_cg_reg
   \   00000002                      REQUIRE ?Register_R6_is_cg_reg
   \   00000002                      REQUIRE ?Register_R7_is_cg_reg
   \   00000002                      REQUIRE ?Register_R8_is_cg_reg
   \   00000002                      REQUIRE ?Register_R9_is_cg_reg
   \   00000002   01D8               MOVW    R27:R26, R17:R16
   \   00000004   0149               MOVW    R9:R8, R19:R18
   \   00000006   013A               MOVW    R7:R6, R21:R20
   \   00000008   012B               MOVW    R5:R4, R23:R22
   \   0000000A   858A               LDD     R24, Y+10
   \   0000000C   859B               LDD     R25, Y+11
   \   0000000E   842C               LDD     R2, Y+12
   \   00000010   843D               LDD     R3, Y+13
   \   00000012   840E               LDD     R0, Y+14
   \   00000014   841F               LDD     R1, Y+15
   \   00000016   8968               LDD     R22, Y+16
   \   00000018   8979               LDD     R23, Y+17
   \   0000001A   892B               LDD     R18, Y+19
   \   0000001C   893C               LDD     R19, Y+20
   \   0000001E   ....               LDI     R16, LOW(??__vtbl_1)
   \   00000020   ....               LDI     R17, (??__vtbl_1) >> 8
   \   00000022   01FD               MOVW    R31:R30, R27:R26
   \   00000024   8F05               STD     Z+29, R16
   \   00000026   8F16               STD     Z+30, R17
    112              m_UBRRH(ubrrh), m_UBRRL(ubrrl), m_UCSRA(ucsra),
   \   00000028   01FD               MOVW    R31:R30, R27:R26
   \   0000002A   8280               ST      Z, R8
   \   0000002C   8291               STD     Z+1, R9
   \   0000002E   01FD               MOVW    R31:R30, R27:R26
   \   00000030   8262               STD     Z+2, R6
   \   00000032   8273               STD     Z+3, R7
   \   00000034   01FD               MOVW    R31:R30, R27:R26
   \   00000036   8244               STD     Z+4, R4
   \   00000038   8255               STD     Z+5, R5
    113              m_UCSRB(ucsrb), m_UCSRC(ucsrc), m_UDR(udr),
   \   0000003A   01FD               MOVW    R31:R30, R27:R26
   \   0000003C   8386               STD     Z+6, R24
   \   0000003E   8397               STD     Z+7, R25
   \   00000040   01FD               MOVW    R31:R30, R27:R26
   \   00000042   8620               STD     Z+8, R2
   \   00000044   8631               STD     Z+9, R3
   \   00000046   01FD               MOVW    R31:R30, R27:R26
   \   00000048   8602               STD     Z+10, R0
   \   0000004A   8613               STD     Z+11, R1
    114              m_rs485ddr(rs485ddr), m_rs485ddpin(rs485ddpin), m_rs485port(rs485port), m_rs485pin(rs485pin)
   \   0000004C   01FD               MOVW    R31:R30, R27:R26
   \   0000004E   8764               STD     Z+12, R22
   \   00000050   8775               STD     Z+13, R23
   \   00000052   890A               LDD     R16, Y+18
   \   00000054   01FD               MOVW    R31:R30, R27:R26
   \   00000056   8706               STD     Z+14, R16
   \   00000058   01FD               MOVW    R31:R30, R27:R26
   \   0000005A   8727               STD     Z+15, R18
   \   0000005C   8B30               STD     Z+16, R19
   \   0000005E   890D               LDD     R16, Y+21
   \   00000060   01FD               MOVW    R31:R30, R27:R26
   \   00000062   8B01               STD     Z+17, R16
    115          {
    116              if (m_rs485ddr)
   \   00000064   01FD               MOVW    R31:R30, R27:R26
   \   00000066   8504               LDD     R16, Z+12
   \   00000068   8515               LDD     R17, Z+13
   \   0000006A   2B01               OR      R16, R17
   \   0000006C   F0D9               BREQ    ??CUart_2
    117              {
    118                  *m_rs485ddr |= Bit(m_rs485ddpin);
   \   0000006E   01FD               MOVW    R31:R30, R27:R26
   \   00000070   8546               LDD     R20, Z+14
   \   00000072   E001               LDI     R16, 1
   \   00000074   E010               LDI     R17, 0
   \   00000076   ....               RCALL   ?S_SHL_L02
   \   00000078   2F40               MOV     R20, R16
   \   0000007A   01FD               MOVW    R31:R30, R27:R26
   \   0000007C   8504               LDD     R16, Z+12
   \   0000007E   8515               LDD     R17, Z+13
   \   00000080   01F8               MOVW    R31:R30, R17:R16
   \   00000082   8100               LD      R16, Z
   \   00000084   2B04               OR      R16, R20
   \   00000086   8300               ST      Z, R16
    119                  *m_rs485port &= ~(Bit(m_rs485pin));
   \   00000088   01FD               MOVW    R31:R30, R27:R26
   \   0000008A   8941               LDD     R20, Z+17
   \   0000008C   E001               LDI     R16, 1
   \   0000008E   E010               LDI     R17, 0
   \   00000090   ....               RCALL   ?S_SHL_L02
   \   00000092   2F40               MOV     R20, R16
   \   00000094   9540               COM     R20
   \   00000096   01FD               MOVW    R31:R30, R27:R26
   \   00000098   8507               LDD     R16, Z+15
   \   0000009A   8910               LDD     R17, Z+16
   \   0000009C   01F8               MOVW    R31:R30, R17:R16
   \   0000009E   8100               LD      R16, Z
   \   000000A0   2304               AND     R16, R20
   \   000000A2   8300               ST      Z, R16
    120              }
    121          }
   \                     ??CUart_2:
   \   000000A4   018D               MOVW    R17:R16, R27:R26
   \   000000A6   E1E6               LDI     R30, 22
   \   000000A8   ....               RJMP    ?EPILOGUE_B10_L09
    122          
    123          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
    124          CUart::~CUart()
   \                     `?~CUart`:
    125          {
   \   00000000   ....               RCALL   ?PROLOGUE2_L09
   \   00000002   01C8               MOVW    R25:R24, R17:R16
   \   00000004   2F08               MOV     R16, R24
   \   00000006   2B09               OR      R16, R25
   \   00000008   F021               BREQ    `?~CUart_1`
   \   0000000A   FB20               BST     R18, 0
   \   0000000C   F416               BRTC    `?~CUart_1`
    126          
    127          }
   \   0000000E   018C               MOVW    R17:R16, R25:R24
   \   00000010   ....               RCALL   `??operator delete`
   \                     `?~CUart_1`:
   \   00000012   E0E2               LDI     R30, 2
   \   00000014   ....               RJMP    ?EPILOGUE_B2_L09
    128          
    129          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
    130          void CUart::Init(uint32_t ulBaudRate,
   \                     ??Init_1:
    131                           uint8_t ucParity,
    132                           uint8_t ucDataBits,
    133                           uint8_t ucStopBit,
    134                           uint8_t *puiRxBuffer,
    135                           uint8_t *puiTxBuffer)
    136          {
   \   00000000   ....               RCALL   ?PROLOGUE13_L09
   \   00000002                      REQUIRE ?Register_R4_is_cg_reg
   \   00000002                      REQUIRE ?Register_R5_is_cg_reg
   \   00000002                      REQUIRE ?Register_R6_is_cg_reg
   \   00000002                      REQUIRE ?Register_R7_is_cg_reg
   \   00000002                      REQUIRE ?Register_R8_is_cg_reg
   \   00000002                      REQUIRE ?Register_R9_is_cg_reg
   \   00000002                      REQUIRE ?Register_R10_is_cg_reg
   \   00000002                      REQUIRE ?Register_R11_is_cg_reg
   \   00000002                      REQUIRE ?Register_R12_is_cg_reg
   \   00000002   01D8               MOVW    R27:R26, R17:R16
   \   00000004   012A               MOVW    R5:R4, R21:R20
   \   00000006   013B               MOVW    R7:R6, R23:R22
   \   00000008   2EB2               MOV     R11, R18
   \   0000000A   2EC3               MOV     R12, R19
   \   0000000C   84AD               LDD     R10, Y+13
   \   0000000E   848E               LDD     R8, Y+14
   \   00000010   849F               LDD     R9, Y+15
   \   00000012   8988               LDD     R24, Y+16
   \   00000014   8999               LDD     R25, Y+17
    137              m_puiRxBuffer = puiRxBuffer;
   \   00000016   01FD               MOVW    R31:R30, R27:R26
   \   00000018   8A86               STD     Z+22, R8
   \   0000001A   8A97               STD     Z+23, R9
    138              m_puiTxBuffer = puiTxBuffer;
   \   0000001C   01FD               MOVW    R31:R30, R27:R26
   \   0000001E   8B82               STD     Z+18, R24
   \   00000020   8B93               STD     Z+19, R25
    139          
    140              /* Set the baud rate */
    141              uint16_t uiBaudRateTemp = (F_CPU / (ulBaudRate * 16UL) - 1);
   \   00000022   0182               MOVW    R17:R16, R5:R4
   \   00000024   0193               MOVW    R19:R18, R7:R6
   \   00000026   E140               LDI     R20, 16
   \   00000028   E050               LDI     R21, 0
   \   0000002A   E060               LDI     R22, 0
   \   0000002C   E070               LDI     R23, 0
   \   0000002E   ....               RCALL   ?L_EC_MUL_L03
   \   00000030   01A8               MOVW    R21:R20, R17:R16
   \   00000032   01B9               MOVW    R23:R22, R19:R18
   \   00000034   E000               LDI     R16, 0
   \   00000036   E810               LDI     R17, 128
   \   00000038   E720               LDI     R18, 112
   \   0000003A   E030               LDI     R19, 0
   \   0000003C   ....               RCALL   ?UL_DIVMOD_L03
   \   0000003E   5001               SUBI    R16, 1
   \   00000040   4010               SBCI    R17, 0
    142              *m_UBRRL = uiBaudRateTemp;
   \   00000042   2F40               MOV     R20, R16
   \   00000044   01FD               MOVW    R31:R30, R27:R26
   \   00000046   8122               LDD     R18, Z+2
   \   00000048   8133               LDD     R19, Z+3
   \   0000004A   01F9               MOVW    R31:R30, R19:R18
   \   0000004C   8340               ST      Z, R20
    143              *m_UBRRH = (uiBaudRateTemp >> 8);
   \   0000004E   0198               MOVW    R19:R18, R17:R16
   \   00000050   2F23               MOV     R18, R19
   \   00000052   E030               LDI     R19, 0
   \   00000054   91ED               LD      R30, X+
   \   00000056   91FC               LD      R31, X
   \   00000058   9711               SBIW    R27:R26, 1
   \   0000005A   8320               ST      Z, R18
    144          
    145              /* Set data bits (7, 8 bits) */
    146              switch (ucDataBits)
   \   0000005C   2D2C               MOV     R18, R12
   \   0000005E   5027               SUBI    R18, 7
   \   00000060   F051               BREQ    ??Init_4
   \   00000062   952A               DEC     R18
   \   00000064   F479               BRNE    ??Init_5
    147              {
    148              case 8:
    149                  *m_UCSRC |= (1 << UCSZ00) | (1 << UCSZ01);
   \   00000066   01FD               MOVW    R31:R30, R27:R26
   \   00000068   8520               LDD     R18, Z+8
   \   0000006A   8531               LDD     R19, Z+9
   \   0000006C   01F9               MOVW    R31:R30, R19:R18
   \   0000006E   8120               LD      R18, Z
   \   00000070   6026               ORI     R18, 0x06
   \   00000072   8320               ST      Z, R18
    150                  break;
   \   00000074   C007               RJMP    ??Init_5
    151              case 7:
    152                  *m_UCSRC |= (1 << UCSZ01);
   \                     ??Init_4:
   \   00000076   01FD               MOVW    R31:R30, R27:R26
   \   00000078   8520               LDD     R18, Z+8
   \   0000007A   8531               LDD     R19, Z+9
   \   0000007C   01F9               MOVW    R31:R30, R19:R18
   \   0000007E   8120               LD      R18, Z
   \   00000080   6024               ORI     R18, 0x04
   \   00000082   8320               ST      Z, R18
    153                  break;
    154              }
    155          
    156              /* Set parity */
    157              if (ucParity == 'N')
   \                     ??Init_5:
   \   00000084   E42E               LDI     R18, 78
   \   00000086   16B2               CP      R11, R18
   \   00000088   F091               BREQ    ??Init_6
    158              {
    159                  /* None */
    160              }
    161              else if (ucParity == 'E')
   \   0000008A   E425               LDI     R18, 69
   \   0000008C   16B2               CP      R11, R18
   \   0000008E   F441               BRNE    ??Init_7
    162              {
    163                  /* Even */
    164                  *m_UCSRC |= (1 << UPM01);
   \   00000090   01FD               MOVW    R31:R30, R27:R26
   \   00000092   8520               LDD     R18, Z+8
   \   00000094   8531               LDD     R19, Z+9
   \   00000096   01F9               MOVW    R31:R30, R19:R18
   \   00000098   8120               LD      R18, Z
   \   0000009A   6220               ORI     R18, 0x20
   \   0000009C   8320               ST      Z, R18
   \   0000009E   C007               RJMP    ??Init_6
    165              }
    166              else
    167              {
    168                  /* Odd */
    169                  *m_UCSRC |= (1 << UPM01) | (1 << UPM00);
   \                     ??Init_7:
   \   000000A0   01FD               MOVW    R31:R30, R27:R26
   \   000000A2   8520               LDD     R18, Z+8
   \   000000A4   8531               LDD     R19, Z+9
   \   000000A6   01F9               MOVW    R31:R30, R19:R18
   \   000000A8   8120               LD      R18, Z
   \   000000AA   6320               ORI     R18, 0x30
   \   000000AC   8320               ST      Z, R18
    170              }
    171          
    172              /* Stop bit (1 or 2) */
    173              if (ucStopBit == 1)
   \                     ??Init_6:
   \   000000AE   E021               LDI     R18, 1
   \   000000B0   16A2               CP      R10, R18
   \   000000B2   F051               BREQ    ??Init_8
    174              {
    175          
    176              }
    177              else if (ucStopBit == 2) /* 2 */
   \   000000B4   E022               LDI     R18, 2
   \   000000B6   16A2               CP      R10, R18
   \   000000B8   F439               BRNE    ??Init_8
    178              {
    179                  *m_UCSRC |= (1 << USBS0);
   \   000000BA   01FD               MOVW    R31:R30, R27:R26
   \   000000BC   8520               LDD     R18, Z+8
   \   000000BE   8531               LDD     R19, Z+9
   \   000000C0   01F9               MOVW    R31:R30, R19:R18
   \   000000C2   8120               LD      R18, Z
   \   000000C4   6028               ORI     R18, 0x08
   \   000000C6   8320               ST      Z, R18
    180              }
    181          }
   \                     ??Init_8:
   \   000000C8   E1E2               LDI     R30, 18
   \   000000CA   ....               RJMP    ?EPILOGUE_B13_L09
    182          
    183          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
    184          void CUart::Reset(void)
   \                     ??Reset:
    185          {
    186              m_nuiRxBuffByteCounter = 0;
   \   00000000   01F8               MOVW    R31:R30, R17:R16
   \   00000002   E020               LDI     R18, 0
   \   00000004   8F20               STD     Z+24, R18
   \   00000006   E020               LDI     R18, 0
   \   00000008   8F21               STD     Z+25, R18
    187              m_bfByteIsReceived = 0;
   \   0000000A   01F8               MOVW    R31:R30, R17:R16
   \   0000000C   E020               LDI     R18, 0
   \   0000000E   8F22               STD     Z+26, R18
    188              m_bfDataExchangeIsOccur = 0;
   \   00000010   01F8               MOVW    R31:R30, R17:R16
   \   00000012   E020               LDI     R18, 0
   \   00000014   8F23               STD     Z+27, R18
    189              m_bfRxBuffOverflow = 0;
   \   00000016   01F8               MOVW    R31:R30, R17:R16
   \   00000018   E020               LDI     R18, 0
   \   0000001A   8F24               STD     Z+28, R18
    190          }
   \   0000001C   9508               RET
    191          
    192          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
    193          void CUart::Enable(void)
   \                     ??Enable_1:
    194          {
   \   00000000   ....               RCALL   ?PROLOGUE4_L09
    195              *m_UCSRA |= (1 << RXC0);
   \   00000002   01F8               MOVW    R31:R30, R17:R16
   \   00000004   81A4               LDD     R26, Z+4
   \   00000006   81B5               LDD     R27, Z+5
   \   00000008   912C               LD      R18, X
   \   0000000A   6820               ORI     R18, 0x80
   \   0000000C   932C               ST      X, R18
    196              *m_UCSRB |= (1 << RXEN0) | (1 << RXCIE0);
   \   0000000E   01F8               MOVW    R31:R30, R17:R16
   \   00000010   81A6               LDD     R26, Z+6
   \   00000012   81B7               LDD     R27, Z+7
   \   00000014   912C               LD      R18, X
   \   00000016   6920               ORI     R18, 0x90
   \   00000018   932C               ST      X, R18
    197          }
   \   0000001A   E0E4               LDI     R30, 4
   \   0000001C   ....               RJMP    ?EPILOGUE_B4_L09
    198          
    199          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
    200          void CUart::Disable(void)
   \                     ??Disable_1:
    201          {
   \   00000000   ....               RCALL   ?PROLOGUE4_L09
    202              *m_UCSRB &= ~((1 << TXEN0) | (1 << TXCIE0));
   \   00000002   01F8               MOVW    R31:R30, R17:R16
   \   00000004   81A6               LDD     R26, Z+6
   \   00000006   81B7               LDD     R27, Z+7
   \   00000008   912C               LD      R18, X
   \   0000000A   7B27               ANDI    R18, 0xB7
   \   0000000C   932C               ST      X, R18
    203              *m_UCSRB &= ~((1 << RXEN0) | (1 << RXCIE0));
   \   0000000E   01F8               MOVW    R31:R30, R17:R16
   \   00000010   81A6               LDD     R26, Z+6
   \   00000012   81B7               LDD     R27, Z+7
   \   00000014   912C               LD      R18, X
   \   00000016   762F               ANDI    R18, 0x6F
   \   00000018   932C               ST      X, R18
    204          }
   \   0000001A   E0E4               LDI     R30, 4
   \   0000001C   ....               RJMP    ?EPILOGUE_B4_L09
    205          
    206          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
    207          void CUart::Rs485RtsOn(void)
   \                     ??Rs485RtsOn:
    208          {
   \   00000000   ....               RCALL   ?PROLOGUE4_L09
   \   00000002   01F8               MOVW    R31:R30, R17:R16
    209              *m_rs485port |= (1 << m_rs485pin);
   \   00000004   8941               LDD     R20, Z+17
   \   00000006   E001               LDI     R16, 1
   \   00000008   E010               LDI     R17, 0
   \   0000000A   ....               RCALL   ?S_SHL_L02
   \   0000000C   85A7               LDD     R26, Z+15
   \   0000000E   89B0               LDD     R27, Z+16
   \   00000010   911C               LD      R17, X
   \   00000012   2B10               OR      R17, R16
   \   00000014   931C               ST      X, R17
    210          }
   \   00000016   E0E4               LDI     R30, 4
   \   00000018   ....               RJMP    ?EPILOGUE_B4_L09
    211          
    212          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
    213          void CUart::Rs485RtsOff(void)
   \                     ??Rs485RtsOff:
    214          {
   \   00000000   ....               RCALL   ?PROLOGUE4_L09
   \   00000002   01F8               MOVW    R31:R30, R17:R16
    215              *m_rs485port &= ~(1 << m_rs485pin);
   \   00000004   8941               LDD     R20, Z+17
   \   00000006   E001               LDI     R16, 1
   \   00000008   E010               LDI     R17, 0
   \   0000000A   ....               RCALL   ?S_SHL_L02
   \   0000000C   9500               COM     R16
   \   0000000E   85A7               LDD     R26, Z+15
   \   00000010   89B0               LDD     R27, Z+16
   \   00000012   911C               LD      R17, X
   \   00000014   2310               AND     R17, R16
   \   00000016   931C               ST      X, R17
    216          }
   \   00000018   E0E4               LDI     R30, 4
   \   0000001A   ....               RJMP    ?EPILOGUE_B4_L09
    217          
    218          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
    219          int16_t CUart::Write(uint8_t *puiSource, uint16_t uiLength)
   \                     ??Write:
    220          {
   \   00000000   ....               RCALL   ?PROLOGUE4_L09
   \   00000002   01D8               MOVW    R27:R26, R17:R16
   \   00000004   01B9               MOVW    R23:R22, R19:R18
   \   00000006   019A               MOVW    R19:R18, R21:R20
    221              m_puiTxBuffer = (uint8_t*)puiSource;
   \   00000008   01FD               MOVW    R31:R30, R27:R26
   \   0000000A   8B62               STD     Z+18, R22
   \   0000000C   8B73               STD     Z+19, R23
    222              m_nuiTxBuffByteCounter = uiLength;
   \   0000000E   01FD               MOVW    R31:R30, R27:R26
   \   00000010   8B24               STD     Z+20, R18
   \   00000012   8B35               STD     Z+21, R19
    223          
    224              *m_UCSRA &= ~(1 << RXC0);
   \   00000014   01FD               MOVW    R31:R30, R27:R26
   \   00000016   8104               LDD     R16, Z+4
   \   00000018   8115               LDD     R17, Z+5
   \   0000001A   01F8               MOVW    R31:R30, R17:R16
   \   0000001C   8100               LD      R16, Z
   \   0000001E   770F               ANDI    R16, 0x7F
   \   00000020   8300               ST      Z, R16
    225              *m_UCSRB &= ~((1 << RXEN0) | (1 << RXCIE0));
   \   00000022   01FD               MOVW    R31:R30, R27:R26
   \   00000024   8106               LDD     R16, Z+6
   \   00000026   8117               LDD     R17, Z+7
   \   00000028   01F8               MOVW    R31:R30, R17:R16
   \   0000002A   8100               LD      R16, Z
   \   0000002C   760F               ANDI    R16, 0x6F
   \   0000002E   8300               ST      Z, R16
    226          
    227              if (m_rs485ddr)
   \   00000030   01FD               MOVW    R31:R30, R27:R26
   \   00000032   8504               LDD     R16, Z+12
   \   00000034   8515               LDD     R17, Z+13
   \   00000036   2B01               OR      R16, R17
   \   00000038   F011               BREQ    ??Write_3
    228              {
    229                  Rs485RtsOn();
   \   0000003A   018D               MOVW    R17:R16, R27:R26
   \   0000003C   ....               RCALL   ??Rs485RtsOn
    230              }
    231          //    UDR0 = *pucUsartTxBuff++;
    232              //    UCSR0B |= (1 << TXEN0) | (1 << TXCIE0);
    233              *m_UCSRA |= (1 << TXC0) | (1 << UDRE0);
   \                     ??Write_3:
   \   0000003E   01FD               MOVW    R31:R30, R27:R26
   \   00000040   8104               LDD     R16, Z+4
   \   00000042   8115               LDD     R17, Z+5
   \   00000044   01F8               MOVW    R31:R30, R17:R16
   \   00000046   8100               LD      R16, Z
   \   00000048   6600               ORI     R16, 0x60
   \   0000004A   8300               ST      Z, R16
    234              *m_UCSRB |= (1 << TXEN0) | (1 << UDRIE0);
   \   0000004C   01FD               MOVW    R31:R30, R27:R26
   \   0000004E   8106               LDD     R16, Z+6
   \   00000050   8117               LDD     R17, Z+7
   \   00000052   01F8               MOVW    R31:R30, R17:R16
   \   00000054   8100               LD      R16, Z
   \   00000056   6208               ORI     R16, 0x28
   \   00000058   8300               ST      Z, R16
    235          
    236              return 1;
   \   0000005A   E001               LDI     R16, 1
   \   0000005C   E010               LDI     R17, 0
   \   0000005E   E0E4               LDI     R30, 4
   \   00000060   ....               RJMP    ?EPILOGUE_B4_L09
    237          }
    238          
    239          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
    240          int16_t CUart::Read(uint8_t *puiDestination)
   \                     ??Read:
    241          {
   \   00000000   ....               RCALL   ?PROLOGUE2_L09
   \   00000002   01F8               MOVW    R31:R30, R17:R16
    242              if (m_bfByteIsReceived)
   \   00000004   8D02               LDD     R16, Z+26
   \   00000006   2300               TST     R16
   \   00000008   F0F9               BREQ    ??Read_4
    243              {
    244                  m_bfByteIsReceived = 0;
   \   0000000A   E000               LDI     R16, 0
   \   0000000C   8F02               STD     Z+26, R16
    245          
    246                  m_puiRxBuffer = puiDestination;
   \   0000000E   8B26               STD     Z+22, R18
   \   00000010   8B37               STD     Z+23, R19
    247          
    248                  if (m_bfRxBuffOverflow)
   \   00000012   8D04               LDD     R16, Z+28
   \   00000014   2300               TST     R16
   \   00000016   F019               BREQ    ??Read_5
    249                  {
    250                      return -1;
   \   00000018   EF0F               LDI     R16, 255
   \   0000001A   EF1F               LDI     R17, 255
   \   0000001C   C017               RJMP    ??Read_6
    251                  }
    252          
    253                  if ((UART_INTERMEDIATE_BUFFER_LENGTH - 1) <= m_nuiRxBuffByteCounter)
   \                     ??Read_5:
   \   0000001E   8D80               LDD     R24, Z+24
   \   00000020   8D91               LDD     R25, Z+25
   \   00000022   970F               SBIW    R25:R24, 15
   \   00000024   F018               BRCS    ??Read_7
    254                  {
    255                      return -1;
   \   00000026   EF0F               LDI     R16, 255
   \   00000028   EF1F               LDI     R17, 255
   \   0000002A   C010               RJMP    ??Read_6
    256                  }
    257                  else if (m_nuiRxBuffByteCounter)
   \                     ??Read_7:
   \   0000002C   8D00               LDD     R16, Z+24
   \   0000002E   8D11               LDD     R17, Z+25
   \   00000030   2B01               OR      R16, R17
   \   00000032   F019               BREQ    ??Read_8
    258                  {
    259          
    260          //            for (int16_t i = 0; i < m_nuiRxBuffByteCounter; i++)
    261          //            {
    262          //                pucDestination[i] = m_auiIntermediateBuff[i];
    263          //            }
    264          //
    265          //            uint8_t uiCounter = m_nuiRxBuffByteCounter;
    266          //            m_nuiRxBuffByteCounter = 0;
    267          //            return uiCounter;
    268                      return m_nuiRxBuffByteCounter;
   \   00000034   8D00               LDD     R16, Z+24
   \   00000036   8D11               LDD     R17, Z+25
   \   00000038   C009               RJMP    ??Read_6
    269                  }
    270                  else if (0 == m_nuiRxBuffByteCounter)
   \                     ??Read_8:
   \   0000003A   8D00               LDD     R16, Z+24
   \   0000003C   8D11               LDD     R17, Z+25
   \   0000003E   2B01               OR      R16, R17
   \   00000040   F419               BRNE    ??Read_4
    271                  {
    272                      return 0;
   \   00000042   E000               LDI     R16, 0
   \   00000044   E010               LDI     R17, 0
   \   00000046   C002               RJMP    ??Read_6
    273                  }
    274              }
    275              return 0;
   \                     ??Read_4:
   \   00000048   E000               LDI     R16, 0
   \   0000004A   E010               LDI     R17, 0
   \                     ??Read_6:
   \   0000004C   E0E2               LDI     R30, 2
   \   0000004E   ....               RJMP    ?EPILOGUE_B2_L09
    276          }
    277          
    278          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
    279          int16_t CUart::Read(void)
   \                     ??Read_1:
    280          {
   \   00000000   ....               RCALL   ?PROLOGUE2_L09
   \   00000002   01F8               MOVW    R31:R30, R17:R16
    281              if (m_bfByteIsReceived)
   \   00000004   8D02               LDD     R16, Z+26
   \   00000006   2300               TST     R16
   \   00000008   F0E9               BREQ    ??Read_9
    282              {
    283                  m_bfByteIsReceived = 0;
   \   0000000A   E000               LDI     R16, 0
   \   0000000C   8F02               STD     Z+26, R16
    284          
    285                  if (m_bfRxBuffOverflow)
   \   0000000E   8D04               LDD     R16, Z+28
   \   00000010   2300               TST     R16
   \   00000012   F019               BREQ    ??Read_10
    286                  {
    287                      return -1;
   \   00000014   EF0F               LDI     R16, 255
   \   00000016   EF1F               LDI     R17, 255
   \   00000018   C017               RJMP    ??Read_11
    288                  }
    289          
    290                  if ((UART_INTERMEDIATE_BUFFER_LENGTH - 1) <= m_nuiRxBuffByteCounter)
   \                     ??Read_10:
   \   0000001A   8D80               LDD     R24, Z+24
   \   0000001C   8D91               LDD     R25, Z+25
   \   0000001E   970F               SBIW    R25:R24, 15
   \   00000020   F018               BRCS    ??Read_12
    291                  {
    292                      return -1;
   \   00000022   EF0F               LDI     R16, 255
   \   00000024   EF1F               LDI     R17, 255
   \   00000026   C010               RJMP    ??Read_11
    293                  }
    294                  else if (m_nuiRxBuffByteCounter)
   \                     ??Read_12:
   \   00000028   8D00               LDD     R16, Z+24
   \   0000002A   8D11               LDD     R17, Z+25
   \   0000002C   2B01               OR      R16, R17
   \   0000002E   F019               BREQ    ??Read_13
    295                  {
    296                      return m_nuiRxBuffByteCounter;
   \   00000030   8D00               LDD     R16, Z+24
   \   00000032   8D11               LDD     R17, Z+25
   \   00000034   C009               RJMP    ??Read_11
    297                  }
    298                  else if (0 == m_nuiRxBuffByteCounter)
   \                     ??Read_13:
   \   00000036   8D00               LDD     R16, Z+24
   \   00000038   8D11               LDD     R17, Z+25
   \   0000003A   2B01               OR      R16, R17
   \   0000003C   F419               BRNE    ??Read_9
    299                  {
    300                      return 0;
   \   0000003E   E000               LDI     R16, 0
   \   00000040   E010               LDI     R17, 0
   \   00000042   C002               RJMP    ??Read_11
    301                  }
    302              }
    303              return 0;
   \                     ??Read_9:
   \   00000044   E000               LDI     R16, 0
   \   00000046   E010               LDI     R17, 0
   \                     ??Read_11:
   \   00000048   E0E2               LDI     R30, 2
   \   0000004A   ....               RJMP    ?EPILOGUE_B2_L09
    304          }
    305          
    306          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
    307          void CUart::UdreInterruptHandler(void)
   \                     ??UdreInterruptHandler:
    308          {
   \   00000000   ....               RCALL   ?PROLOGUE4_L09
    309              if (m_nuiTxBuffByteCounter == 0)
   \   00000002   01F8               MOVW    R31:R30, R17:R16
   \   00000004   8924               LDD     R18, Z+20
   \   00000006   8935               LDD     R19, Z+21
   \   00000008   2B23               OR      R18, R19
   \   0000000A   F499               BRNE    ??UdreInterruptHandler_1
    310              {
    311                  *m_UCSRB &= ~((1 << UDRIE0));
   \   0000000C   01F8               MOVW    R31:R30, R17:R16
   \   0000000E   81A6               LDD     R26, Z+6
   \   00000010   81B7               LDD     R27, Z+7
   \   00000012   912C               LD      R18, X
   \   00000014   7D2F               ANDI    R18, 0xDF
   \   00000016   932C               ST      X, R18
    312                  *m_UCSRA |= (1 << TXC0);
   \   00000018   01F8               MOVW    R31:R30, R17:R16
   \   0000001A   81A4               LDD     R26, Z+4
   \   0000001C   81B5               LDD     R27, Z+5
   \   0000001E   912C               LD      R18, X
   \   00000020   6420               ORI     R18, 0x40
   \   00000022   932C               ST      X, R18
    313                  *m_UCSRB |= (1 << TXCIE0);
   \   00000024   01F8               MOVW    R31:R30, R17:R16
   \   00000026   81A6               LDD     R26, Z+6
   \   00000028   81B7               LDD     R27, Z+7
   \   0000002A   912C               LD      R18, X
   \   0000002C   6420               ORI     R18, 0x40
   \   0000002E   932C               ST      X, R18
    314                  return;
   \   00000030   C015               RJMP    ??UdreInterruptHandler_2
    315              }
    316              *m_UDR = *m_puiTxBuffer++;
   \                     ??UdreInterruptHandler_1:
   \   00000032   01F8               MOVW    R31:R30, R17:R16
   \   00000034   89A2               LDD     R26, Z+18
   \   00000036   89B3               LDD     R27, Z+19
   \   00000038   019D               MOVW    R19:R18, R27:R26
   \   0000003A   5F2F               SUBI    R18, 255
   \   0000003C   4F3F               SBCI    R19, 255
   \   0000003E   01F8               MOVW    R31:R30, R17:R16
   \   00000040   8B22               STD     Z+18, R18
   \   00000042   8B33               STD     Z+19, R19
   \   00000044   912C               LD      R18, X
   \   00000046   01F8               MOVW    R31:R30, R17:R16
   \   00000048   85A2               LDD     R26, Z+10
   \   0000004A   85B3               LDD     R27, Z+11
   \   0000004C   932C               ST      X, R18
    317              m_nuiTxBuffByteCounter--;
   \   0000004E   01F8               MOVW    R31:R30, R17:R16
   \   00000050   8924               LDD     R18, Z+20
   \   00000052   8935               LDD     R19, Z+21
   \   00000054   5021               SUBI    R18, 1
   \   00000056   4030               SBCI    R19, 0
   \   00000058   8B24               STD     Z+20, R18
   \   0000005A   8B35               STD     Z+21, R19
    318          }
   \                     ??UdreInterruptHandler_2:
   \   0000005C   E0E4               LDI     R30, 4
   \   0000005E   ....               RJMP    ?EPILOGUE_B4_L09
    319          
    320          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
    321          void CUart::TxcInterruptHandler(void)
   \                     ??TxcInterruptHandler:
    322          {
   \   00000000   ....               RCALL   ?PROLOGUE4_L09
   \   00000002   01D8               MOVW    R27:R26, R17:R16
    323              *m_UCSRB &= ~((1 << TXEN0) | (1 << TXCIE0));
   \   00000004   9616               ADIW    R27:R26, 6
   \   00000006   91ED               LD      R30, X+
   \   00000008   91FC               LD      R31, X
   \   0000000A   9717               SBIW    R27:R26, 7
   \   0000000C   8100               LD      R16, Z
   \   0000000E   7B07               ANDI    R16, 0xB7
   \   00000010   8300               ST      Z, R16
    324          
    325              if (m_rs485ddr)
   \   00000012   01FD               MOVW    R31:R30, R27:R26
   \   00000014   8504               LDD     R16, Z+12
   \   00000016   8515               LDD     R17, Z+13
   \   00000018   2B01               OR      R16, R17
   \   0000001A   F011               BREQ    ??TxcInterruptHandler_1
    326              {
    327                  Rs485RtsOff();
   \   0000001C   018D               MOVW    R17:R16, R27:R26
   \   0000001E   ....               RCALL   ??Rs485RtsOff
    328              }
    329              *m_UCSRA |= (1 << RXC0);
   \                     ??TxcInterruptHandler_1:
   \   00000020   9614               ADIW    R27:R26, 4
   \   00000022   91ED               LD      R30, X+
   \   00000024   91FC               LD      R31, X
   \   00000026   9715               SBIW    R27:R26, 5
   \   00000028   8100               LD      R16, Z
   \   0000002A   6800               ORI     R16, 0x80
   \   0000002C   8300               ST      Z, R16
    330              *m_UCSRB |= (1 << RXEN0) | (1 << RXCIE0);
   \   0000002E   9616               ADIW    R27:R26, 6
   \   00000030   91ED               LD      R30, X+
   \   00000032   91FC               LD      R31, X
   \   00000034   9717               SBIW    R27:R26, 7
   \   00000036   8100               LD      R16, Z
   \   00000038   6900               ORI     R16, 0x90
   \   0000003A   8300               ST      Z, R16
    331              m_bfDataExchangeIsOccur = 1;
   \   0000003C   01FD               MOVW    R31:R30, R27:R26
   \   0000003E   E001               LDI     R16, 1
   \   00000040   8F03               STD     Z+27, R16
    332              return;
   \   00000042   E0E4               LDI     R30, 4
   \   00000044   ....               RJMP    ?EPILOGUE_B4_L09
    333          }
    334          
    335          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
    336          void CUart::RecvInterruptHandler(void)
   \                     ??RecvInterruptHandler:
    337          {
   \   00000000   ....               RCALL   ?PROLOGUE4_L09
    338              // промежуточный буфер приёма переполнен?
    339              if (m_nuiRxBuffByteCounter >=
    340                      UART_MAX_BUFF_LENGTH)
   \   00000002   01F8               MOVW    R31:R30, R17:R16
   \   00000004   8D20               LDD     R18, Z+24
   \   00000006   8D31               LDD     R19, Z+25
   \   00000008   3020               CPI     R18, 0
   \   0000000A   E041               LDI     R20, 1
   \   0000000C   0734               CPC     R19, R20
   \   0000000E   F038               BRCS    ??RecvInterruptHandler_2
    341              {
    342                  m_bfRxBuffOverflow = 1;
   \   00000010   01F8               MOVW    R31:R30, R17:R16
   \   00000012   E021               LDI     R18, 1
   \   00000014   8F24               STD     Z+28, R18
    343                  // не инкрементируем pucUsartRxBuff, чтобы не выйти за границы буфера.
    344                  m_bfByteIsReceived = 1;
   \   00000016   01F8               MOVW    R31:R30, R17:R16
   \   00000018   E021               LDI     R18, 1
   \   0000001A   8F22               STD     Z+26, R18
   \   0000001C   C015               RJMP    ??RecvInterruptHandler_3
    345              }
    346              else
    347              {
    348                  m_puiRxBuffer[m_nuiRxBuffByteCounter++] = *m_UDR;
   \                     ??RecvInterruptHandler_2:
   \   0000001E   01F8               MOVW    R31:R30, R17:R16
   \   00000020   8D20               LDD     R18, Z+24
   \   00000022   8D31               LDD     R19, Z+25
   \   00000024   01C9               MOVW    R25:R24, R19:R18
   \   00000026   9601               ADIW    R25:R24, 1
   \   00000028   01F8               MOVW    R31:R30, R17:R16
   \   0000002A   8F80               STD     Z+24, R24
   \   0000002C   8F91               STD     Z+25, R25
   \   0000002E   01F8               MOVW    R31:R30, R17:R16
   \   00000030   85A2               LDD     R26, Z+10
   \   00000032   85B3               LDD     R27, Z+11
   \   00000034   914C               LD      R20, X
   \   00000036   01F8               MOVW    R31:R30, R17:R16
   \   00000038   89A6               LDD     R26, Z+22
   \   0000003A   89B7               LDD     R27, Z+23
   \   0000003C   0FA2               ADD     R26, R18
   \   0000003E   1FB3               ADC     R27, R19
   \   00000040   934C               ST      X, R20
    349                  m_bfByteIsReceived = 1;
   \   00000042   01F8               MOVW    R31:R30, R17:R16
   \   00000044   E021               LDI     R18, 1
   \   00000046   8F22               STD     Z+26, R18
    350              }
    351          }
   \                     ??RecvInterruptHandler_3:
   \   00000048   E0E4               LDI     R30, 4
   \   0000004A   ....               RJMP    ?EPILOGUE_B4_L09
    352          
    353          //-----------------------------------------------------------------------------------------------------
    354          // Прерывание по пустому регистру данных UDR
    355          #pragma vector = USART_UDRE_vect

   \                                 In  segment CODE, align 2, keep-with-next
    356          __interrupt void SIG_UART0_DATA(void)
   \                     ??SIG_UART0_DATA:
    357          {
   \   00000000   93FA               ST      -Y, R31
   \   00000002   93EA               ST      -Y, R30
   \   00000004   920A               ST      -Y, R0
   \   00000006   934A               ST      -Y, R20
   \   00000008   933A               ST      -Y, R19
   \   0000000A   932A               ST      -Y, R18
   \   0000000C   931A               ST      -Y, R17
   \   0000000E   930A               ST      -Y, R16
   \   00000010   B74F               IN      R20, 0x3F
    358              CPlatform::m_pxUart0 -> UdreInterruptHandler();
   \   00000012   9100....           LDS     R16, ??m_pxUart0
   \   00000016   9110....           LDS     R17, (??m_pxUart0 + 1)
   \   0000001A   ....               RCALL   ??UdreInterruptHandler
    359          }
   \   0000001C   BF4F               OUT     0x3F, R20
   \   0000001E   9109               LD      R16, Y+
   \   00000020   9119               LD      R17, Y+
   \   00000022   9129               LD      R18, Y+
   \   00000024   9139               LD      R19, Y+
   \   00000026   9149               LD      R20, Y+
   \   00000028   9009               LD      R0, Y+
   \   0000002A   91E9               LD      R30, Y+
   \   0000002C   91F9               LD      R31, Y+
   \   0000002E   9518               RETI
    360          
    361          //-----------------------------------------------------------------------------------------------------
    362          // Прерывание по завершению передачи UART
    363          #pragma vector = USART_TX_vect

   \                                 In  segment CODE, align 2, keep-with-next
    364          __interrupt void SIG_UART0_TXC(void)
   \                     ??SIG_UART0_TXC:
    365          {
   \   00000000   93FA               ST      -Y, R31
   \   00000002   93EA               ST      -Y, R30
   \   00000004   920A               ST      -Y, R0
   \   00000006   934A               ST      -Y, R20
   \   00000008   932A               ST      -Y, R18
   \   0000000A   931A               ST      -Y, R17
   \   0000000C   930A               ST      -Y, R16
   \   0000000E   B72F               IN      R18, 0x3F
    366              CPlatform::m_pxUart0 -> TxcInterruptHandler();
   \   00000010   9100....           LDS     R16, ??m_pxUart0
   \   00000014   9110....           LDS     R17, (??m_pxUart0 + 1)
   \   00000018   ....               RCALL   ??TxcInterruptHandler
    367          }
   \   0000001A   BF2F               OUT     0x3F, R18
   \   0000001C   9109               LD      R16, Y+
   \   0000001E   9119               LD      R17, Y+
   \   00000020   9129               LD      R18, Y+
   \   00000022   9149               LD      R20, Y+
   \   00000024   9009               LD      R0, Y+
   \   00000026   91E9               LD      R30, Y+
   \   00000028   91F9               LD      R31, Y+
   \   0000002A   9518               RETI
    368          
    369          //-----------------------------------------------------------------------------------------------------
    370          // Прерывание по завершению приема UART
    371          #pragma vector = USART_RX_vect

   \                                 In  segment CODE, align 2, keep-with-next
    372          __interrupt void SIG_UART0_RECV(void)
   \                     ??SIG_UART0_RECV:
    373          {
   \   00000000   93FA               ST      -Y, R31
   \   00000002   93EA               ST      -Y, R30
   \   00000004   920A               ST      -Y, R0
   \   00000006   935A               ST      -Y, R21
   \   00000008   934A               ST      -Y, R20
   \   0000000A   933A               ST      -Y, R19
   \   0000000C   932A               ST      -Y, R18
   \   0000000E   931A               ST      -Y, R17
   \   00000010   930A               ST      -Y, R16
   \   00000012   B75F               IN      R21, 0x3F
    374              CPlatform::m_pxUart0 -> RecvInterruptHandler();
   \   00000014   9100....           LDS     R16, ??m_pxUart0
   \   00000018   9110....           LDS     R17, (??m_pxUart0 + 1)
   \   0000001C   ....               RCALL   ??RecvInterruptHandler
    375          }
   \   0000001E   BF5F               OUT     0x3F, R21
   \   00000020   9109               LD      R16, Y+
   \   00000022   9119               LD      R17, Y+
   \   00000024   9129               LD      R18, Y+
   \   00000026   9139               LD      R19, Y+
   \   00000028   9149               LD      R20, Y+
   \   0000002A   9159               LD      R21, Y+
   \   0000002C   9009               LD      R0, Y+
   \   0000002E   91E9               LD      R30, Y+
   \   00000030   91F9               LD      R31, Y+
   \   00000032   9518               RETI
    376          
    377          //-----------------------------------------------------------------------------------------------------
    378          
    379          
    380          
    381          
    382          
    383          //----------------------------------------- EEPROM ----------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
    384          CEeprom::CEeprom()
   \                     ??CEeprom:
    385          {
   \   00000000   ....               LDI     R18, LOW(??__vtbl_4)
   \   00000002   ....               LDI     R19, (??__vtbl_4) >> 8
   \   00000004   01F8               MOVW    R31:R30, R17:R16
   \   00000006   8320               ST      Z, R18
   \   00000008   8331               STD     Z+1, R19
    386          
    387          }
   \   0000000A   9508               RET
    388          
    389          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
    390          CEeprom::~CEeprom()
   \                     `?~CEeprom`:
    391          {
   \   00000000   ....               RCALL   ?PROLOGUE2_L09
   \   00000002   01C8               MOVW    R25:R24, R17:R16
   \   00000004   2F08               MOV     R16, R24
   \   00000006   2B09               OR      R16, R25
   \   00000008   F021               BREQ    `?~CEeprom_1`
   \   0000000A   FB20               BST     R18, 0
   \   0000000C   F416               BRTC    `?~CEeprom_1`
    392          
    393          }
   \   0000000E   018C               MOVW    R17:R16, R25:R24
   \   00000010   ....               RCALL   `??operator delete`
   \                     `?~CEeprom_1`:
   \   00000012   E0E2               LDI     R30, 2
   \   00000014   ....               RJMP    ?EPILOGUE_B2_L09
    394          
    395          // SFR_W_N(0x21, EEAR, Dummy15, Dummy14, Dummy13, Dummy12, Dummy11, Dummy10, Dummy9, Dummy8, EEAR7, EEAR6, EEAR5, EEAR4, EEAR3, EEAR2, EEAR1, EEAR0)
    396          // SFR_B_N(0x20, EEDR, EEDR7, EEDR6, EEDR5, EEDR4, EEDR3, EEDR2, EEDR1, EEDR0)
    397          // SFR_B_N(0x1F, EECR, Dummy7, Dummy6, EEPM1, EEPM0, EERIE, EEMPE, EEPE, EERE)
    398          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
    399          uint8_t CEeprom::ReadByte(uint16_t ui16EepromSourse)
   \                     ??ReadByte:
    400          {
   \   00000000   0198               MOVW    R19:R18, R17:R16
    401              __watchdog_reset();
   \   00000002   95A8               WDR
    402              while (BitIsSet(EECR, EEPE))
   \                     ??ReadByte_1:
   \   00000004   9BF9               SBIS    0x1F, 0x01
   \   00000006   C002               RJMP    ??ReadByte_2
    403              {
    404                  __watchdog_reset();
   \   00000008   95A8               WDR
   \   0000000A   CFFC               RJMP    ??ReadByte_1
    405              }
    406              __disable_interrupt();
   \                     ??ReadByte_2:
   \   0000000C   94F8               CLI
    407              EEAR = ui16EepromSourse;
   \   0000000E   BD32               OUT     0x22, R19
   \   00000010   BD21               OUT     0x21, R18
    408              SetBit(EECR, EERE);
   \   00000012   9AF8               SBI     0x1F, 0x00
    409              __enable_interrupt();
   \   00000014   9478               SEI
    410              return EEDR;
   \   00000016   B500               IN      R16, 0x20
   \   00000018   9508               RET
   \   0000001A                      REQUIRE _A_EECR
   \   0000001A                      REQUIRE _A_EEAR
   \   0000001A                      REQUIRE _A_EEDR
    411          }
    412          
    413          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
    414          void CEeprom::WriteByte(uint16_t ui16EepromDestination, uint8_t ucData)
   \                     ??WriteByte:
    415          {
    416              __watchdog_reset();
   \   00000000   95A8               WDR
    417              while (BitIsSet(EECR, EEPE))
   \                     ??WriteByte_1:
   \   00000002   9BF9               SBIS    0x1F, 0x01
   \   00000004   C002               RJMP    ??WriteByte_2
    418              {
    419                  __watchdog_reset();
   \   00000006   95A8               WDR
   \   00000008   CFFC               RJMP    ??WriteByte_1
    420              }
    421              __disable_interrupt();
   \                     ??WriteByte_2:
   \   0000000A   94F8               CLI
    422              EEAR = ui16EepromDestination;
   \   0000000C   BD12               OUT     0x22, R17
   \   0000000E   BD01               OUT     0x21, R16
    423              EEDR = ucData;
   \   00000010   BD20               OUT     0x20, R18
    424              EECR |= (1<<EEMPE);
   \   00000012   9AFA               SBI     0x1F, 0x02
    425              EECR |= (1<<EEPE);
   \   00000014   9AF9               SBI     0x1F, 0x01
    426              __enable_interrupt();
   \   00000016   9478               SEI
    427          }
   \   00000018   9508               RET
   \   0000001A                      REQUIRE _A_EECR
   \   0000001A                      REQUIRE _A_EEAR
   \   0000001A                      REQUIRE _A_EEDR
    428          
    429          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
    430          uint8_t CEeprom::Read(uint8_t *pucRamDestination, uint16_t uiEepromSourse, uint16_t nuiLength)
   \                     ??Read_2:
    431          {
   \   00000000   ....               RCALL   ?PROLOGUE2_L09
   \   00000002   01F8               MOVW    R31:R30, R17:R16
   \   00000004   01C9               MOVW    R25:R24, R19:R18
    432              while (nuiLength != 0)
   \                     ??Read_14:
   \   00000006   2F04               MOV     R16, R20
   \   00000008   2B05               OR      R16, R21
   \   0000000A   F041               BREQ    ??Read_15
    433              {
    434                  *pucRamDestination++ = ReadByte(uiEepromSourse++);
   \   0000000C   018C               MOVW    R17:R16, R25:R24
   \   0000000E   ....               RCALL   ??ReadByte
   \   00000010   9601               ADIW    R25:R24, 1
   \   00000012   8300               ST      Z, R16
   \   00000014   9631               ADIW    R31:R30, 1
    435                  nuiLength--;
   \   00000016   5041               SUBI    R20, 1
   \   00000018   4050               SBCI    R21, 0
   \   0000001A   CFF5               RJMP    ??Read_14
    436              }
    437              return 1;
   \                     ??Read_15:
   \   0000001C   E001               LDI     R16, 1
   \   0000001E   E0E2               LDI     R30, 2
   \   00000020   ....               RJMP    ?EPILOGUE_B2_L09
    438          }
    439          
    440          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
    441          uint8_t CEeprom::Write(uint16_t uiEepromDestination, uint8_t *pucRamSourse, uint16_t nuiLength)
   \                     ??Write_1:
    442          {
   \   00000000   ....               RCALL   ?PROLOGUE2_L09
   \   00000002   01C8               MOVW    R25:R24, R17:R16
   \   00000004   01B9               MOVW    R23:R22, R19:R18
    443              while (nuiLength != 0)
   \                     ??Write_4:
   \   00000006   2F04               MOV     R16, R20
   \   00000008   2B05               OR      R16, R21
   \   0000000A   F059               BREQ    ??Write_5
    444              {
    445                  WriteByte((uiEepromDestination++), (*pucRamSourse++));
   \   0000000C   01FB               MOVW    R31:R30, R23:R22
   \   0000000E   01BF               MOVW    R23:R22, R31:R30
   \   00000010   5F6F               SUBI    R22, 255
   \   00000012   4F7F               SBCI    R23, 255
   \   00000014   8120               LD      R18, Z
   \   00000016   018C               MOVW    R17:R16, R25:R24
   \   00000018   ....               RCALL   ??WriteByte
   \   0000001A   9601               ADIW    R25:R24, 1
    446                  nuiLength--;
   \   0000001C   5041               SUBI    R20, 1
   \   0000001E   4050               SBCI    R21, 0
   \   00000020   CFF2               RJMP    ??Write_4
    447              }
    448              return 1;
   \                     ??Write_5:
   \   00000022   E001               LDI     R16, 1
   \   00000024   E0E2               LDI     R30, 2
   \   00000026   ....               RJMP    ?EPILOGUE_B2_L09
    449          }
    450          //-----------------------------------------------------------------------------------------------------
    451          
    452          
    453          
    454          
    455          
    456          //----------------------------------------- CSpi ----------------------------------------------------------------

   \                                 In  segment NEAR_Z, align 1, keep-with-next, root
   \   00000000                      REQUIRE `?<Segment init: NEAR_Z>`
    457          uint8_t CSpi::m_uiExchangeByte;
   \                     ??m_uiExchangeByte:
   \   00000000                      DS8 1

   \                                 In  segment NEAR_Z, align 1, keep-with-next, root
   \   00000000                      REQUIRE `?<Segment init: NEAR_Z>`
    458          uint8_t* CSpi::m_puiRxBuffer;
   \                     ??m_puiRxBuffer:
   \   00000000                      DS8 2

   \                                 In  segment NEAR_Z, align 1, keep-with-next, root
   \   00000000                      REQUIRE `?<Segment init: NEAR_Z>`
    459          uint8_t* CSpi::m_puiTxBuffer;
   \                     ??m_puiTxBuffer:
   \   00000000                      DS8 2

   \                                 In  segment NEAR_Z, align 1, keep-with-next, root
   \   00000000                      REQUIRE `?<Segment init: NEAR_Z>`
    460          uint16_t CSpi::m_nuiBuffByteCounter;
   \                     ??m_nuiBuffByteCounter:
   \   00000000                      DS8 2

   \                                 In  segment NEAR_Z, align 1, keep-with-next, root
   \   00000000                      REQUIRE `?<Segment init: NEAR_Z>`
    461          uint16_t CSpi::m_uiReceivedByteCounter;
   \                     ??m_uiReceivedByteCounter:
   \   00000000                      DS8 2

   \                                 In  segment NEAR_Z, align 1, keep-with-next, root
   \   00000000                      REQUIRE `?<Segment init: NEAR_Z>`
    462          bool CSpi::m_bfByteIsReceived;
   \                     ??m_bfByteIsReceived:
   \   00000000                      DS8 1

   \                                 In  segment NEAR_Z, align 1, keep-with-next, root
   \   00000000                      REQUIRE `?<Segment init: NEAR_Z>`
    463          bool CSpi::m_bfByteIsTransmited;
   \                     ??m_bfByteIsTransmited:
   \   00000000                      DS8 1

   \                                 In  segment NEAR_Z, align 1, keep-with-next, root
   \   00000000                      REQUIRE `?<Segment init: NEAR_Z>`
    464          bool CSpi::m_bfDataExchangeInProgress;
   \                     ??m_bfDataExchangeInProgress:
   \   00000000                      DS8 1

   \                                 In  segment NEAR_Z, align 1, keep-with-next, root
   \   00000000                      REQUIRE `?<Segment init: NEAR_Z>`
    465          bool CSpi::m_bfDataExchangeIsOccur;
   \                     ??m_bfDataExchangeIsOccur:
   \   00000000                      DS8 1

   \                                 In  segment NEAR_Z, align 1, keep-with-next, root
   \   00000000                      REQUIRE `?<Segment init: NEAR_Z>`
    466          bool CSpi::m_bfRxBuffOverflow;
   \                     ??m_bfRxBuffOverflow:
   \   00000000                      DS8 1

   \                                 In  segment NEAR_Z, align 1, keep-with-next, root
   \   00000000                      REQUIRE `?<Segment init: NEAR_Z>`
    467          uint8_t CSpi::m_auiSpiRxBuffer[];
   \                     ??m_auiSpiRxBuffer:
   \   00000000                      DS8 16

   \                                 In  segment NEAR_Z, align 1, keep-with-next, root
   \   00000000                      REQUIRE `?<Segment init: NEAR_Z>`
    468          uint8_t CSpi::m_auiSpiTxBuffer[];
   \                     ??m_auiSpiTxBuffer:
   \   00000000                      DS8 16
    469          
    470          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
    471          CSpi::CSpi()
   \                     ??CSpi:
    472          {
   \   00000000   ....               LDI     R18, LOW(??__vtbl_2)
   \   00000002   ....               LDI     R19, (??__vtbl_2) >> 8
   \   00000004   01F8               MOVW    R31:R30, R17:R16
   \   00000006   8320               ST      Z, R18
   \   00000008   8331               STD     Z+1, R19
    473          
    474          }
   \   0000000A   9508               RET
    475          
    476          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
    477          CSpi::~CSpi()
   \                     `?~CSpi`:
    478          {
   \   00000000   ....               RCALL   ?PROLOGUE2_L09
   \   00000002   01C8               MOVW    R25:R24, R17:R16
   \   00000004   2F08               MOV     R16, R24
   \   00000006   2B09               OR      R16, R25
   \   00000008   F021               BREQ    `?~CSpi_1`
   \   0000000A   FB20               BST     R18, 0
   \   0000000C   F416               BRTC    `?~CSpi_1`
    479          
    480          }
   \   0000000E   018C               MOVW    R17:R16, R25:R24
   \   00000010   ....               RCALL   `??operator delete`
   \                     `?~CSpi_1`:
   \   00000012   E0E2               LDI     R30, 2
   \   00000014   ....               RJMP    ?EPILOGUE_B2_L09
    481          
    482          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
    483          void CSpi::Init(uint8_t *puiRxBuffer, uint8_t *puiTxBuffer)
   \                     ??Init_2:
    484          {
    485          //    m_puiRxBuffer = m_auiSpiRxBuffer;
    486          //    m_puiTxBuffer = m_auiSpiTxBuffer;
    487              m_puiRxBuffer = puiRxBuffer;
   \   00000000   ....               LDI     R30, LOW(??m_puiRxBuffer)
   \   00000002   ....               LDI     R31, (??m_puiRxBuffer) >> 8
   \   00000004   8300               ST      Z, R16
   \   00000006   8311               STD     Z+1, R17
    488              m_puiTxBuffer = puiTxBuffer;
   \   00000008   ....               LDI     R30, LOW(??m_puiTxBuffer)
   \   0000000A   ....               LDI     R31, (??m_puiTxBuffer) >> 8
   \   0000000C   8320               ST      Z, R18
   \   0000000E   8331               STD     Z+1, R19
    489          //    // Master mode.
    490          //    SPCR = 0;
    491          //    SPCR  |= (BIT(SPR1));		// Slave,  57600.
    492          //
    493          //    DDRB  |= (BIT(SPI_MOSI));
    494          
    495              // Slave mode.
    496              DDRB  |= (Bit(SPI_MISO) | Bit(DDB1));
   \   00000010   B144               IN      R20, 0x04
   \   00000012   6142               ORI     R20, 0x12
   \   00000014   B944               OUT     0x04, R20
    497              SPCR |= (1 << SPR1);
   \   00000016   B54C               IN      R20, 0x2C
   \   00000018   6042               ORI     R20, 0x02
   \   0000001A   BD4C               OUT     0x2C, R20
    498          };
   \   0000001C   9508               RET
   \   0000001E                      REQUIRE _A_DDRB
   \   0000001E                      REQUIRE _A_SPCR
    499          
    500          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
    501          void CSpi::Enable(void)
   \                     ??Enable_2:
    502          {
    503          //    // Slave mode.
    504          //    DDRB  |= (Bit(SPI_MISO) | Bit(DDB1));
    505              // разрешим SS.
    506              PORTB &= ~Bit(PB1);
   \   00000000   9829               CBI     0x05, 0x01
    507              // разрешим SPI.
    508              // разрешим прерывание SPI_STC.
    509              SPCR |= ((1 << SPE) | (1 << SPIE));
   \   00000002   B50C               IN      R16, 0x2C
   \   00000004   6C00               ORI     R16, 0xC0
   \   00000006   BD0C               OUT     0x2C, R16
    510          //    SPDR = 0;
    511          }
   \   00000008   9508               RET
   \   0000000A                      REQUIRE _A_PORTB
   \   0000000A                      REQUIRE _A_SPCR
    512          
    513          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
    514          void CSpi::Disable(void)
   \                     ??Disable_2:
    515          {
    516              // Slave mode.
    517          //    // запретим прерывание SPI_STC.
    518          //    PORTB &= ~(Bit(SPI_MOSI) | Bit(SPI_MISO) | Bit(SPI_SCK));
    519          //    DDRB  &= ~(Bit(SPI_MOSI) | Bit(SPI_MISO) | Bit(SPI_SCK));
    520              // запретим SS.
    521              PORTB |= Bit(PB1);
   \   00000000   9A29               SBI     0x05, 0x01
    522              SPCR &= ~((1 << SPE) | (1 << SPIE));
   \   00000002   B50C               IN      R16, 0x2C
   \   00000004   730F               ANDI    R16, 0x3F
   \   00000006   BD0C               OUT     0x2C, R16
    523          }
   \   00000008   9508               RET
   \   0000000A                      REQUIRE _A_PORTB
   \   0000000A                      REQUIRE _A_SPCR
    524          
    525          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
    526          void CSpi::Reset(void)
   \                     ??Reset_1:
    527          {
    528              m_nuiBuffByteCounter = 0;
   \   00000000   ....               LDI     R30, LOW(??m_nuiBuffByteCounter)
   \   00000002   ....               LDI     R31, (??m_nuiBuffByteCounter) >> 8
   \   00000004   E000               LDI     R16, 0
   \   00000006   8300               ST      Z, R16
   \   00000008   E000               LDI     R16, 0
   \   0000000A   8301               STD     Z+1, R16
    529              m_uiReceivedByteCounter = 0;
   \   0000000C   ....               LDI     R30, LOW(??m_uiReceivedByteCounter)
   \   0000000E   ....               LDI     R31, (??m_uiReceivedByteCounter) >> 8
   \   00000010   E000               LDI     R16, 0
   \   00000012   8300               ST      Z, R16
   \   00000014   E000               LDI     R16, 0
   \   00000016   8301               STD     Z+1, R16
    530              m_bfByteIsReceived = 0;
   \   00000018   E000               LDI     R16, 0
   \   0000001A   9300....           STS     ??m_bfByteIsReceived, R16
    531              m_bfByteIsTransmited = 0;
   \   0000001E   E000               LDI     R16, 0
   \   00000020   9300....           STS     ??m_bfByteIsTransmited, R16
    532              m_bfDataExchangeInProgress = 0;
   \   00000024   E000               LDI     R16, 0
   \   00000026   9300....           STS     ??m_bfDataExchangeInProgress, R16
    533              m_bfDataExchangeIsOccur = 0;
   \   0000002A   E000               LDI     R16, 0
   \   0000002C   9300....           STS     ??m_bfDataExchangeIsOccur, R16
    534              m_bfRxBuffOverflow = 0;
   \   00000030   E000               LDI     R16, 0
   \   00000032   9300....           STS     ??m_bfRxBuffOverflow, R16
    535              m_uiExchangeByte = 0;
   \   00000036   E000               LDI     R16, 0
   \   00000038   9300....           STS     ??m_uiExchangeByte, R16
    536          }
   \   0000003C   9508               RET
    537          
    538          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
    539          int16_t CSpi::Exchange(uint16_t uiLength)
   \                     ??Exchange:
    540          {
   \   00000000   0198               MOVW    R19:R18, R17:R16
    541          //    SPDR = uiData;
    542          //
    543          //    while(!(SPSR & BIT(SPIF)))		// Ожидание конца передачи
    544          //    {
    545          ////  if(!(SPSR & BIT(MSTR))) break;	// Защита от перехода в режим Slave
    546          //    };
    547          //
    548          //
    549          //    return  SPDR;
    550          
    551          
    552              m_bfByteIsReceived = 0;
   \   00000002   E000               LDI     R16, 0
   \   00000004   9300....           STS     ??m_bfByteIsReceived, R16
    553          
    554              if (m_bfRxBuffOverflow)
   \   00000008   9100....           LDS     R16, ??m_bfRxBuffOverflow
   \   0000000C   2300               TST     R16
   \   0000000E   F019               BREQ    ??Exchange_2
    555              {
    556                  return -1;
   \   00000010   EF0F               LDI     R16, 255
   \   00000012   EF1F               LDI     R17, 255
   \   00000014   9508               RET
    557              }
    558              if (uiLength <= m_nuiBuffByteCounter)
   \                     ??Exchange_2:
   \   00000016   ....               LDI     R30, LOW(??m_nuiBuffByteCounter)
   \   00000018   ....               LDI     R31, (??m_nuiBuffByteCounter) >> 8
   \   0000001A   8100               LD      R16, Z
   \   0000001C   8111               LDD     R17, Z+1
   \   0000001E   1702               CP      R16, R18
   \   00000020   0713               CPC     R17, R19
   \   00000022   F018               BRCS    ??Exchange_3
    559              {
    560                  return -1;
   \   00000024   EF0F               LDI     R16, 255
   \   00000026   EF1F               LDI     R17, 255
   \   00000028   9508               RET
    561              }
    562              else if (m_nuiBuffByteCounter)
   \                     ??Exchange_3:
   \   0000002A   ....               LDI     R30, LOW(??m_nuiBuffByteCounter)
   \   0000002C   ....               LDI     R31, (??m_nuiBuffByteCounter) >> 8
   \   0000002E   8100               LD      R16, Z
   \   00000030   8111               LDD     R17, Z+1
   \   00000032   2B01               OR      R16, R17
   \   00000034   F031               BREQ    ??Exchange_4
    563              {
    564          //        CPlatform::InterruptDisable();
    565          
    566          //        *puiDestination = m_uiExchangeByte;
    567          //        m_uiExchangeByte = 0x78;//*puiSourse;
    568          
    569                  uint8_t uiCounter = m_nuiBuffByteCounter;
   \   00000036   ....               LDI     R30, LOW(??m_nuiBuffByteCounter)
   \   00000038   ....               LDI     R31, (??m_nuiBuffByteCounter) >> 8
   \   0000003A   8100               LD      R16, Z
   \   0000003C   8111               LDD     R17, Z+1
    570          //        m_nuiBuffByteCounter = 0;
    571          
    572          //        CPlatform::InterruptEnable();
    573          
    574                  return uiCounter;
   \   0000003E   E010               LDI     R17, 0
   \   00000040   9508               RET
    575              }
    576              else if (0 == m_nuiBuffByteCounter)
   \                     ??Exchange_4:
   \   00000042   ....               LDI     R30, LOW(??m_nuiBuffByteCounter)
   \   00000044   ....               LDI     R31, (??m_nuiBuffByteCounter) >> 8
   \   00000046   8100               LD      R16, Z
   \   00000048   8111               LDD     R17, Z+1
   \   0000004A   2B01               OR      R16, R17
   \   0000004C   F419               BRNE    ??Exchange_5
    577              {
    578                  return 0;
   \   0000004E   E000               LDI     R16, 0
   \   00000050   E010               LDI     R17, 0
   \   00000052   9508               RET
    579              }
    580          
    581              return 0;
   \                     ??Exchange_5:
   \   00000054   E000               LDI     R16, 0
   \   00000056   E010               LDI     R17, 0
   \   00000058   9508               RET
    582          }
    583          
    584          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
    585          int16_t CSpi::Exchange(uint8_t *puiDestination, uint8_t *puiSourse, uint16_t uiLength)
   \                     ??Exchange_1:
    586          {
   \   00000000   01B8               MOVW    R23:R22, R17:R16
    587              m_bfByteIsReceived = 0;
   \   00000002   E000               LDI     R16, 0
   \   00000004   9300....           STS     ??m_bfByteIsReceived, R16
    588          
    589              if (m_bfRxBuffOverflow)
   \   00000008   9100....           LDS     R16, ??m_bfRxBuffOverflow
   \   0000000C   2300               TST     R16
   \   0000000E   F019               BREQ    ??Exchange_6
    590              {
    591                  return -1;
   \   00000010   EF0F               LDI     R16, 255
   \   00000012   EF1F               LDI     R17, 255
   \   00000014   9508               RET
    592              }
    593              if (uiLength <= m_nuiBuffByteCounter)
   \                     ??Exchange_6:
   \   00000016   ....               LDI     R30, LOW(??m_nuiBuffByteCounter)
   \   00000018   ....               LDI     R31, (??m_nuiBuffByteCounter) >> 8
   \   0000001A   8100               LD      R16, Z
   \   0000001C   8111               LDD     R17, Z+1
   \   0000001E   1704               CP      R16, R20
   \   00000020   0715               CPC     R17, R21
   \   00000022   F018               BRCS    ??Exchange_7
    594              {
    595                  return -1;
   \   00000024   EF0F               LDI     R16, 255
   \   00000026   EF1F               LDI     R17, 255
   \   00000028   9508               RET
    596              }
    597              else if (m_nuiBuffByteCounter)
   \                     ??Exchange_7:
   \   0000002A   ....               LDI     R30, LOW(??m_nuiBuffByteCounter)
   \   0000002C   ....               LDI     R31, (??m_nuiBuffByteCounter) >> 8
   \   0000002E   8100               LD      R16, Z
   \   00000030   8111               LDD     R17, Z+1
   \   00000032   2B01               OR      R16, R17
   \   00000034   F031               BREQ    ??Exchange_8
    598              {
    599          //        CPlatform::InterruptDisable();
    600          
    601          //        *puiDestination = m_uiExchangeByte;
    602          //        m_uiExchangeByte = 0x78;//*puiSourse;
    603          
    604                  uint8_t uiCounter = m_nuiBuffByteCounter;
   \   00000036   ....               LDI     R30, LOW(??m_nuiBuffByteCounter)
   \   00000038   ....               LDI     R31, (??m_nuiBuffByteCounter) >> 8
   \   0000003A   8100               LD      R16, Z
   \   0000003C   8111               LDD     R17, Z+1
    605          //        m_nuiBuffByteCounter = 0;
    606          
    607          //        CPlatform::InterruptEnable();
    608          
    609                  return uiCounter;
   \   0000003E   E010               LDI     R17, 0
   \   00000040   9508               RET
    610              }
    611              else if (0 == m_nuiBuffByteCounter)
   \                     ??Exchange_8:
   \   00000042   ....               LDI     R30, LOW(??m_nuiBuffByteCounter)
   \   00000044   ....               LDI     R31, (??m_nuiBuffByteCounter) >> 8
   \   00000046   8100               LD      R16, Z
   \   00000048   8111               LDD     R17, Z+1
   \   0000004A   2B01               OR      R16, R17
   \   0000004C   F419               BRNE    ??Exchange_9
    612              {
    613                  return 0;
   \   0000004E   E000               LDI     R16, 0
   \   00000050   E010               LDI     R17, 0
   \   00000052   9508               RET
    614              }
    615          
    616              return 0;
   \                     ??Exchange_9:
   \   00000054   E000               LDI     R16, 0
   \   00000056   E010               LDI     R17, 0
   \   00000058   9508               RET
    617          }
    618          
    619          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
    620          uint8_t CSpi::Write(uint16_t uiEepromDestination, uint8_t *pucRamSourse, uint16_t nuiLength)
   \                     ??Write_2:
    621          {
   \   00000000   01B8               MOVW    R23:R22, R17:R16
    622          
    623              return 1;
   \   00000002   E001               LDI     R16, 1
   \   00000004   9508               RET
    624          }
    625          
    626          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
    627          uint8_t CSpi::Read(uint8_t *pucRamDestination, uint16_t uiEepromSourse, uint16_t nuiLength)
   \                     ??Read_3:
    628          {
   \   00000000   01B8               MOVW    R23:R22, R17:R16
    629          
    630              return 1;
   \   00000002   E001               LDI     R16, 1
   \   00000004   9508               RET
    631          }
    632          
    633          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
    634          void CSpi::RecvInterruptHandler(void)
   \                     ??RecvInterruptHandler_1:
    635          {
    636          //    SPDR = m_uiExchangeByte;
    637          //    m_uiExchangeByte = SPDR;
    638          //    // буфер приёма не переполнен?
    639          //    if (m_nuiBuffByteCounter <
    640          //            SPI_MAX_BUFF_LENGTH)
    641          //    {
    642          //        m_nuiBuffByteCounter++;
    643          //        m_bfByteIsReceived = 1;
    644          //    }
    645          //    else
    646          //    {
    647          //        // не инкрементируем m_nuiBuffByteCounter, чтобы не выйти за границы буфера.
    648          //        // установим флаг - произошел обмен данными по SPI.
    649          //        m_bfRxBuffOverflow = 1;
    650          //        m_bfByteIsReceived = 1;
    651          //    }
    652          
    653          
    654          //    SPDR = m_uiExchangeByte;
    655          //    m_puiRxBuffer[m_nuiBuffByteCounter] = SPDR;
    656          //    m_uiExchangeByte = m_puiTxBuffer[m_nuiBuffByteCounter];
    657          //    // буфер приёма не переполнен?
    658          //    if (m_nuiBuffByteCounter <
    659          //            SPI_MAX_BUFF_LENGTH)
    660          //    {
    661          //        m_nuiBuffByteCounter++;
    662          //        m_bfByteIsReceived = 1;
    663          //    }
    664          //    else
    665          //    {
    666          //        // не инкрементируем m_nuiBuffByteCounter, чтобы не выйти за границы буфера.
    667          //        // установим флаг - произошел обмен данными по SPI.
    668          //        m_bfRxBuffOverflow = 1;
    669          //        m_bfByteIsReceived = 1;
    670          //    }
    671          }
   \   00000000   9508               RET
    672          
    673          //-----------------------------------------------------------------------------------------------------
    674          #pragma vector = SPI_STC_vect

   \                                 In  segment CODE, align 2, keep-with-next
    675          __interrupt void SIG_SPI_STC(void)
   \                     ??SIG_SPI_STC:
    676          {
   \   00000000   93FA               ST      -Y, R31
   \   00000002   93EA               ST      -Y, R30
   \   00000004   934A               ST      -Y, R20
   \   00000006   933A               ST      -Y, R19
   \   00000008   932A               ST      -Y, R18
   \   0000000A   931A               ST      -Y, R17
   \   0000000C   930A               ST      -Y, R16
   \   0000000E   B74F               IN      R20, 0x3F
    677              if (CSpi::m_bfByteIsTransmited)
   \   00000010   9100....           LDS     R16, ??m_bfByteIsTransmited
   \   00000014   2300               TST     R16
   \   00000016   F021               BREQ    ??SIG_SPI_STC_1
    678              {
    679                  SPDR = CSpi::m_uiExchangeByte;
   \   00000018   9100....           LDS     R16, ??m_uiExchangeByte
   \   0000001C   BD0E               OUT     0x2E, R16
   \   0000001E   C005               RJMP    ??SIG_SPI_STC_2
    680              }
    681              else
    682              {
    683                  // Первый байт не передаём, чтобы прошло "эхо".
    684                  CSpi::m_bfByteIsTransmited = 1;
   \                     ??SIG_SPI_STC_1:
   \   00000020   E001               LDI     R16, 1
   \   00000022   9300....           STS     ??m_bfByteIsTransmited, R16
    685                  SPDR = SPDR;//0x91;//
   \   00000026   B50E               IN      R16, 0x2E
   \   00000028   BD0E               OUT     0x2E, R16
    686              }
    687          //    SPDR = CSpi::m_uiExchangeByte;
    688              CSpi::m_puiRxBuffer[CSpi::m_nuiBuffByteCounter] = SPDR;
   \                     ??SIG_SPI_STC_2:
   \   0000002A   B50E               IN      R16, 0x2E
   \   0000002C   9120....           LDS     R18, ??m_nuiBuffByteCounter
   \   00000030   9130....           LDS     R19, (??m_nuiBuffByteCounter + 1)
   \   00000034   91E0....           LDS     R30, ??m_puiRxBuffer
   \   00000038   91F0....           LDS     R31, (??m_puiRxBuffer + 1)
   \   0000003C   0FE2               ADD     R30, R18
   \   0000003E   1FF3               ADC     R31, R19
   \   00000040   8300               ST      Z, R16
    689              CSpi::m_uiExchangeByte = CSpi::m_puiTxBuffer[CSpi::m_nuiBuffByteCounter + 1];
   \   00000042   9100....           LDS     R16, ??m_nuiBuffByteCounter
   \   00000046   9110....           LDS     R17, (??m_nuiBuffByteCounter + 1)
   \   0000004A   91E0....           LDS     R30, ??m_puiTxBuffer
   \   0000004E   91F0....           LDS     R31, (??m_puiTxBuffer + 1)
   \   00000052   0FE0               ADD     R30, R16
   \   00000054   1FF1               ADC     R31, R17
   \   00000056   8101               LDD     R16, Z+1
   \   00000058   9300....           STS     ??m_uiExchangeByte, R16
    690          
    691              // буфер приёма не переполнен?
    692              if (CSpi::m_nuiBuffByteCounter <
    693                      CSpi::BUFFER_LENGTH)
   \   0000005C   91E0....           LDS     R30, ??m_nuiBuffByteCounter
   \   00000060   91F0....           LDS     R31, (??m_nuiBuffByteCounter + 1)
   \   00000064   9770               SBIW    R31:R30, 16
   \   00000066   F460               BRCC    ??SIG_SPI_STC_3
    694              {
    695                  CSpi::m_nuiBuffByteCounter++;
   \   00000068   ....               LDI     R30, LOW(??m_nuiBuffByteCounter)
   \   0000006A   ....               LDI     R31, (??m_nuiBuffByteCounter) >> 8
   \   0000006C   8100               LD      R16, Z
   \   0000006E   8111               LDD     R17, Z+1
   \   00000070   5F0F               SUBI    R16, 255
   \   00000072   4F1F               SBCI    R17, 255
   \   00000074   8300               ST      Z, R16
   \   00000076   8311               STD     Z+1, R17
    696                  CSpi::m_bfByteIsReceived = 1;
   \   00000078   E001               LDI     R16, 1
   \   0000007A   9300....           STS     ??m_bfByteIsReceived, R16
   \   0000007E   C006               RJMP    ??SIG_SPI_STC_4
    697              }
    698              else
    699              {
    700                  // не инкрементируем m_nuiBuffByteCounter, чтобы не выйти за границы буфера.
    701                  // установим флаг - произошел обмен данными по SPI.
    702                  CSpi::m_bfRxBuffOverflow = 1;
   \                     ??SIG_SPI_STC_3:
   \   00000080   E001               LDI     R16, 1
   \   00000082   9300....           STS     ??m_bfRxBuffOverflow, R16
    703                  CSpi::m_bfByteIsReceived = 1;
   \   00000086   E001               LDI     R16, 1
   \   00000088   9300....           STS     ??m_bfByteIsReceived, R16
    704              }
    705          }
   \                     ??SIG_SPI_STC_4:
   \   0000008C   BF4F               OUT     0x3F, R20
   \   0000008E   9109               LD      R16, Y+
   \   00000090   9119               LD      R17, Y+
   \   00000092   9129               LD      R18, Y+
   \   00000094   9139               LD      R19, Y+
   \   00000096   9149               LD      R20, Y+
   \   00000098   91E9               LD      R30, Y+
   \   0000009A   91F9               LD      R31, Y+
   \   0000009C   9518               RETI
   \   0000009E                      REQUIRE _A_SPDR
    706          
    707          //-----------------------------------------------------------------------------------------------------
    708          
    709          
    710          
    711          
    712          
    713          //-----------------------------------------------------------------------------------------------------
    714          // delay

   \                                 In  segment CODE, align 2, keep-with-next
    715          void delay_ms(uint16_t millisecs)
   \                     ??delay_ms:
   \                     ??delay_ms_1:
    716          {
    717              while(millisecs--)
   \   00000000   0198               MOVW    R19:R18, R17:R16
   \   00000002   0189               MOVW    R17:R16, R19:R18
   \   00000004   5001               SUBI    R16, 1
   \   00000006   4010               SBCI    R17, 0
   \   00000008   2B23               OR      R18, R19
   \   0000000A   F041               BREQ    ??delay_ms_2
    718              {
    719                  delay_us(1000);
   \   0000000C   ED25               LDI     R18, 213
   \   0000000E   E036               LDI     R19, 6
   \   00000010   5021               SUBI    R18, 1
   \   00000012   4030               SBCI    R19, 0
   \   00000014   F7E9               BRNE    $-4
   \   00000016   C000               RJMP    $+2
   \   00000018   0000               NOP
   \   0000001A   CFF2               RJMP    ??delay_ms_1
    720              }
    721          }
   \                     ??delay_ms_2:
   \   0000001C   9508               RET

   \                                 In  segment CODE, align 2, keep-with-next
    722          void delay_s(uint16_t secs)
   \                     ??delay_s:
   \                     ??delay_s_1:
    723          {
    724              while(secs--)
   \   00000000   0198               MOVW    R19:R18, R17:R16
   \   00000002   0189               MOVW    R17:R16, R19:R18
   \   00000004   5001               SUBI    R16, 1
   \   00000006   4010               SBCI    R17, 0
   \   00000008   2B23               OR      R18, R19
   \   0000000A   F051               BREQ    ??delay_s_2
    725              {
    726                  __delay_cycles(F_CPU);
   \   0000000C   EF4F               LDI     R20, 255
   \   0000000E   E75F               LDI     R21, 127
   \   00000010   E166               LDI     R22, 22
   \   00000012   5041               SUBI    R20, 1
   \   00000014   4050               SBCI    R21, 0
   \   00000016   4060               SBCI    R22, 0
   \   00000018   F7E1               BRNE    $-6
   \   0000001A   C000               RJMP    $+2
   \   0000001C   0000               NOP
   \   0000001E   CFF0               RJMP    ??delay_s_1
    727              }
    728          }
   \                     ??delay_s_2:
   \   00000020   9508               RET

   \                                 In  segment CODE, align 2, keep-with-next
    729          void delay_mins(uint16_t minutes)
   \                     ??delay_mins:
   \                     ??delay_mins_1:
    730          {
    731              while(minutes--)
   \   00000000   0198               MOVW    R19:R18, R17:R16
   \   00000002   0189               MOVW    R17:R16, R19:R18
   \   00000004   5001               SUBI    R16, 1
   \   00000006   4010               SBCI    R17, 0
   \   00000008   2B23               OR      R18, R19
   \   0000000A   F061               BREQ    ??delay_mins_2
    732              {
    733                  __delay_cycles(60*F_CPU);
   \   0000000C   EF4F               LDI     R20, 255
   \   0000000E   EF5F               LDI     R21, 255
   \   00000010   E664               LDI     R22, 100
   \   00000012   E074               LDI     R23, 4
   \   00000014   5041               SUBI    R20, 1
   \   00000016   4050               SBCI    R21, 0
   \   00000018   4060               SBCI    R22, 0
   \   0000001A   4070               SBCI    R23, 0
   \   0000001C   F7D9               BRNE    $-8
   \   0000001E   C000               RJMP    $+2
   \   00000020   0000               NOP
   \   00000022   CFEE               RJMP    ??delay_mins_1
    734              }
    735          }
   \                     ??delay_mins_2:
   \   00000024   9508               RET
    736          
    737          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment NEAR_Z, align 1, keep-with-next, root
   \   00000000                      REQUIRE `?<Segment init: NEAR_Z>`
    738          uint16_t CPlatform::m_uiSystemTick;
   \                     ??m_uiSystemTick:
   \   00000000                      DS8 2

   \                                 In  segment NEAR_Z, align 1, keep-with-next, root
   \   00000000                      REQUIRE `?<Segment init: NEAR_Z>`
    739          CUart* CPlatform::m_pxUart0;
   \                     ??m_pxUart0:
   \   00000000                      DS8 2

   \                                 In  segment NEAR_Z, align 1, keep-with-next, root
   \   00000000                      REQUIRE `?<Segment init: NEAR_Z>`
    740          CUart* CPlatform::m_pxUart1;
   \                     ??m_pxUart1:
   \   00000000                      DS8 2

   \                                 In  segment NEAR_Z, align 1, keep-with-next, root
   \   00000000                      REQUIRE `?<Segment init: NEAR_Z>`
    741          CSpi* CPlatform::m_pxSpi;
   \                     ??m_pxSpi:
   \   00000000                      DS8 2

   \                                 In  segment NEAR_Z, align 1, keep-with-next, root
   \   00000000                      REQUIRE `?<Segment init: NEAR_Z>`
    742          uint8_t CPlatform::uiSlaveSelectIsHigh;
   \                     ??uiSlaveSelectIsHigh:
   \   00000000                      DS8 1
    743          
    744          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
    745          CPlatform::CPlatform()
   \                     ??CPlatform:
    746          {
   \   00000000   ....               LDI     R18, LOW(??__vtbl_3)
   \   00000002   ....               LDI     R19, (??__vtbl_3) >> 8
   \   00000004   01F8               MOVW    R31:R30, R17:R16
   \   00000006   8320               ST      Z, R18
   \   00000008   8331               STD     Z+1, R19
    747          
    748          }
   \   0000000A   9508               RET
    749          
    750          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
    751          CPlatform::~CPlatform()
   \                     `?~CPlatform`:
    752          {
   \   00000000   ....               RCALL   ?PROLOGUE2_L09
   \   00000002   01C8               MOVW    R25:R24, R17:R16
   \   00000004   2F08               MOV     R16, R24
   \   00000006   2B09               OR      R16, R25
   \   00000008   F021               BREQ    `?~CPlatform_1`
   \   0000000A   FB20               BST     R18, 0
   \   0000000C   F416               BRTC    `?~CPlatform_1`
    753          
    754          }
   \   0000000E   018C               MOVW    R17:R16, R25:R24
   \   00000010   ....               RCALL   `??operator delete`
   \                     `?~CPlatform_1`:
   \   00000012   E0E2               LDI     R30, 2
   \   00000014   ....               RJMP    ?EPILOGUE_B2_L09
    755          
    756          //-----------------------------------------------------------------------------------------------------
    757          // INT0
    758          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
    759          void CPlatform::Int0InterruptEnable(void)
   \                     ??Int0InterruptEnable:
    760          {
    761              // установим прерывание INT0 по переднему фронту(ожидание конца обмена данными по SPI).
    762              EICRA &= ~(Bit(ISC01) | Bit(ISC00));
   \   00000000   9100....           LDS     R16, _A_EICRA
   \   00000004   7F0C               ANDI    R16, 0xFC
   \   00000006   9300....           STS     _A_EICRA, R16
    763              EICRA |= (Bit(ISC01) | Bit(ISC00));
   \   0000000A   9100....           LDS     R16, _A_EICRA
   \   0000000E   6003               ORI     R16, 0x03
   \   00000010   9300....           STS     _A_EICRA, R16
    764              // разрешение внешнего прерывания INT0.
    765              EIMSK |= Bit(INT0);
   \   00000014   9AE8               SBI     0x1D, 0x00
    766          }
   \   00000016   9508               RET
   \   00000018                      REQUIRE _A_EICRA
   \   00000018                      REQUIRE _A_EIMSK
    767          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
    768          void CPlatform::Int0InterruptDisable(void)
   \                     ??Int0InterruptDisable:
    769          {
    770              // запретим внешнее прерывание INT0.
    771              EIMSK &= ~Bit(INT0);
   \   00000000   98E8               CBI     0x1D, 0x00
    772          }
   \   00000002   9508               RET
   \   00000004                      REQUIRE _A_EIMSK
    773          
    774          //-----------------------------------------------------------------------------------------------------
    775          #pragma vector = INT0_vect

   \                                 In  segment CODE, align 2, keep-with-next
    776          __interrupt void SIG_INT0(void)
   \                     ??SIG_INT0:
    777          {
   \   00000000   938A               ST      -Y, R24
   \   00000002   93FA               ST      -Y, R31
   \   00000004   93EA               ST      -Y, R30
   \   00000006   923A               ST      -Y, R3
   \   00000008   922A               ST      -Y, R2
   \   0000000A   921A               ST      -Y, R1
   \   0000000C   920A               ST      -Y, R0
   \   0000000E   937A               ST      -Y, R23
   \   00000010   936A               ST      -Y, R22
   \   00000012   935A               ST      -Y, R21
   \   00000014   934A               ST      -Y, R20
   \   00000016   933A               ST      -Y, R19
   \   00000018   932A               ST      -Y, R18
   \   0000001A   931A               ST      -Y, R17
   \   0000001C   930A               ST      -Y, R16
   \   0000001E   B78F               IN      R24, 0x3F
    778              // прерывание INT0 произошло по переднему фронту(закончен обмен данными по SPI)?
    779              if (!(BIT_IS_SET(PIND, SPI_SS5)))
   \   00000020   994A               SBIC    0x09, 0x02
   \   00000022   C014               RJMP    ??SIG_INT0_1
    780              {
    781                  // прерывание INT0 произошло по переднему фронту(закончен обмен данными по SPI).
    782                  // установим флаг - вход SS0 переходил в 1(запущен демон ПАС).
    783                  CPlatform::uiSlaveSelectIsHigh = 1;
   \   00000024   E001               LDI     R16, 1
   \   00000026   9300....           STS     ??uiSlaveSelectIsHigh, R16
    784                  CSpi::DataExchangeInProgressClear();
   \   0000002A   ....               RCALL   ??DataExchangeInProgressClear
    785                  // запретим SPI.
    786                  CSpi::Disable();
   \   0000002C   ....               RCALL   ??Disable_2
    787                  // установим прерывание INT0 по переднему фронту(ожидание конца обмена данными по SPI).
    788                  EICRA &= ~(Bit(ISC01) | Bit(ISC00));
   \   0000002E   9100....           LDS     R16, _A_EICRA
   \   00000032   7F0C               ANDI    R16, 0xFC
   \   00000034   9300....           STS     _A_EICRA, R16
    789                  EICRA |= (Bit(ISC01) | Bit(ISC00));
   \   00000038   9100....           LDS     R16, _A_EICRA
   \   0000003C   6003               ORI     R16, 0x03
   \   0000003E   9300....           STS     _A_EICRA, R16
    790                  // установим флаг - произошел обмен данными по SPI.
    791                  CSpi::DataExchangeIsOccurSet();
   \   00000042   ....               RCALL   ??DataExchangeIsOccurSet
    792                  CMvsn21::FlowControlSet(CMvsn21::FSM_IDDLE);
   \   00000044   E000               LDI     R16, 0
   \   00000046   ....               RCALL   ??FlowControlSet
    793                  CPlatform::TxLedOff();
   \   00000048   ....               RCALL   ??TxLedOff
   \   0000004A   C011               RJMP    ??SIG_INT0_2
    794              }
    795              else
    796              {
    797                  CSpi::DataExchangeInProgressSet();
   \                     ??SIG_INT0_1:
   \   0000004C   ....               RCALL   ??DataExchangeInProgressSet
    798                  CSpi::Enable();
   \   0000004E   ....               RCALL   ??Enable_2
    799                  // установим прерывание INT0 по заднему фронту(ожидание начала обмена данными по SPI).
    800                  EICRA &= ~(Bit(ISC01) | Bit(ISC00));
   \   00000050   9100....           LDS     R16, _A_EICRA
   \   00000054   7F0C               ANDI    R16, 0xFC
   \   00000056   9300....           STS     _A_EICRA, R16
    801                  EICRA |= (Bit(ISC01));
   \   0000005A   91000069           LDS     R16, 105
   \   0000005E   6002               ORI     R16, 0x02
   \   00000060   93000069           STS     105, R16
    802                  CMvsn21::FlowControlSet(CMvsn21::FSM_START);
   \   00000064   E001               LDI     R16, 1
   \   00000066   ....               RCALL   ??FlowControlSet
    803                  CMvsn21::MeasureFlowControlSet(CMvsn21::FSM_START);
   \   00000068   E001               LDI     R16, 1
   \   0000006A   ....               RCALL   ??MeasureFlowControlSet
    804                  CPlatform::TxLedOn();
   \   0000006C   ....               RCALL   ??TxLedOn
    805              }
    806          }
   \                     ??SIG_INT0_2:
   \   0000006E   BF8F               OUT     0x3F, R24
   \   00000070   9109               LD      R16, Y+
   \   00000072   9119               LD      R17, Y+
   \   00000074   9129               LD      R18, Y+
   \   00000076   9139               LD      R19, Y+
   \   00000078   9149               LD      R20, Y+
   \   0000007A   9159               LD      R21, Y+
   \   0000007C   9169               LD      R22, Y+
   \   0000007E   9179               LD      R23, Y+
   \   00000080   9009               LD      R0, Y+
   \   00000082   9019               LD      R1, Y+
   \   00000084   9029               LD      R2, Y+
   \   00000086   9039               LD      R3, Y+
   \   00000088   91E9               LD      R30, Y+
   \   0000008A   91F9               LD      R31, Y+
   \   0000008C   9189               LD      R24, Y+
   \   0000008E   9518               RETI
   \   00000090                      REQUIRE _A_PIND
   \   00000090                      REQUIRE _A_EICRA
    807          
    808          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
    809          void SystemTickInit(void)
   \                     ??SystemTickInit:
    810          {
    811          #define MAIN_TIMER_TICK_RATE_HZ 1000
    812          
    813          //#define TIMER1_INTERRUPT
    814          #define TIMER2_INTERRUPT
    815          
    816          
    817          #ifdef TIMER2_INTERRUPT
    818              /* Hardware constants for timer 2. */
    819          #define portCLEAR_COUNTER_ON_MATCH              ( ( unsigned char ) _BV(WGM21) )
    820          #define portPRESCALE_64                         ( ( unsigned char ) (_BV(CS21) | _BV(CS20)) )
    821          #define portCLOCK_PRESCALER                     ( ( unsigned long ) 64 )
    822          #define portCOMPARE_MATCH_A_INTERRUPT_ENABLE    ( ( unsigned char ) _BV(OCIE2A) )
    823          #endif //TIMER2_INTERRUPT
    824          
    825          #ifdef TIMER1_INTERRUPT
    826              /* Hardware constants for timer 1. */
    827          #define portCLEAR_COUNTER_ON_MATCH              ( ( unsigned char ) _BV(WGM12) )
    828          #define portPRESCALE_64                         ( ( unsigned char ) (_BV(CS11) | _BV(CS10)) )
    829          #define portCLOCK_PRESCALER                     ( ( unsigned long ) 64 )
    830          #define portCOMPARE_MATCH_A_INTERRUPT_ENABLE    ( ( unsigned char ) _BV(OCIE1A) )
    831          #endif //TIMER1_INTERRUPT
    832          
    833          #ifdef TIMER2_INTERRUPT
    834          
    835              OCR2A = (((F_CPU / MAIN_TIMER_TICK_RATE_HZ) / 128) - 1);
   \   00000000   E308               LDI     R16, 56
   \   00000002   9300....           STS     _A_OCR2A, R16
    836              TCCR2A |= (Bit(WGM21));
   \   00000006   910000B0           LDS     R16, 176
   \   0000000A   6002               ORI     R16, 0x02
   \   0000000C   930000B0           STS     176, R16
    837              TCCR2B |= (Bit(CS22) | Bit(CS20));
   \   00000010   9100....           LDS     R16, _A_TCCR2B
   \   00000014   6005               ORI     R16, 0x05
   \   00000016   9300....           STS     _A_TCCR2B, R16
    838          
    839              TIMSK2 |= Bit(OCIE2A);
   \   0000001A   91000070           LDS     R16, 112
   \   0000001E   6002               ORI     R16, 0x02
   \   00000020   93000070           STS     112, R16
    840          
    841          #endif //TIMER2_INTERRUPT
    842          
    843          #ifdef TIMER1_INTERRUPT
    844          
    845              unsigned long ulCompareMatch;
    846              unsigned char ucLowByte;
    847          
    848              /* Using 16bit timer 1 to generate the tick.  Correct fuses must be
    849              selected for the configCPU_CLOCK_HZ clock. */
    850          
    851              ulCompareMatch = CPlatform::F_CPU / MAIN_TIMER_TICK_RATE_HZ;
    852          
    853              /* We only have 16 bits so have to scale to get our required tick rate. */
    854              ulCompareMatch /= portCLOCK_PRESCALER;
    855          
    856              /* Adjust for correct value. */
    857              ulCompareMatch -= ( unsigned long ) 1;
    858          
    859              /* Setup compare match value for compare match A.  Interrupts are disabled
    860              before this is called so we need not worry here. */
    861              OCR1A = ulCompareMatch;
    862          
    863              /* Setup clock source and compare match behaviour. */
    864              TCCR1A &= ~(_BV(WGM11) | _BV(WGM10));
    865              ucLowByte = portCLEAR_COUNTER_ON_MATCH | portPRESCALE_64;
    866              TCCR1B = ucLowByte;
    867          
    868              /* Enable the interrupt - this is okay as interrupt are currently globally
    869              disabled. */
    870              ucLowByte = TIMSK;
    871              ucLowByte |= portCOMPARE_MATCH_A_INTERRUPT_ENABLE;
    872              TIMSK = ucLowByte;
    873          
    874          #endif //TIMER1_INTERRUPT
    875          
    876          }
   \   00000024   9508               RET
   \   00000026                      REQUIRE _A_OCR2A
   \   00000026                      REQUIRE _A_TCCR2A
   \   00000026                      REQUIRE _A_TCCR2B
   \   00000026                      REQUIRE _A_TIMSK2
    877          
    878          //-----------------------------------------------------------------------------------------------------
    879          #ifdef TIMER1_INTERRUPT
    880          // Прерывание TIMER1_COMPA_vect
    881          __interrupt void SystemTickInterrupt(void)
    882          {
    883              CPlatform::IncrementSystemTick();
    884          }
    885          #endif //TIMER1_INTERRUPT
    886          //-----------------------------------------------------------------------------------------------------
    887          #ifdef TIMER2_INTERRUPT
    888          // Прерывание TIMER2_COMP_vect
    889          #pragma vector = TIMER2_COMPA_vect	// Прерывание по совпадению TMR2 с OCR2

   \                                 In  segment CODE, align 2, keep-with-next
    890          __interrupt void SystemTickInterrupt(void)
   \                     ??SystemTickInterrupt:
    891          {
   \   00000000   938A               ST      -Y, R24
   \   00000002   93FA               ST      -Y, R31
   \   00000004   93EA               ST      -Y, R30
   \   00000006   923A               ST      -Y, R3
   \   00000008   922A               ST      -Y, R2
   \   0000000A   921A               ST      -Y, R1
   \   0000000C   920A               ST      -Y, R0
   \   0000000E   937A               ST      -Y, R23
   \   00000010   936A               ST      -Y, R22
   \   00000012   935A               ST      -Y, R21
   \   00000014   934A               ST      -Y, R20
   \   00000016   933A               ST      -Y, R19
   \   00000018   932A               ST      -Y, R18
   \   0000001A   931A               ST      -Y, R17
   \   0000001C   930A               ST      -Y, R16
   \   0000001E   B78F               IN      R24, 0x3F
    892              CPlatform::IncrementSystemTick();
   \   00000020   ....               RCALL   ??IncrementSystemTick
    893          }
   \   00000022   BF8F               OUT     0x3F, R24
   \   00000024   9109               LD      R16, Y+
   \   00000026   9119               LD      R17, Y+
   \   00000028   9129               LD      R18, Y+
   \   0000002A   9139               LD      R19, Y+
   \   0000002C   9149               LD      R20, Y+
   \   0000002E   9159               LD      R21, Y+
   \   00000030   9169               LD      R22, Y+
   \   00000032   9179               LD      R23, Y+
   \   00000034   9009               LD      R0, Y+
   \   00000036   9019               LD      R1, Y+
   \   00000038   9029               LD      R2, Y+
   \   0000003A   9039               LD      R3, Y+
   \   0000003C   91E9               LD      R30, Y+
   \   0000003E   91F9               LD      R31, Y+
   \   00000040   9189               LD      R24, Y+
   \   00000042   9518               RETI
    894          #endif //TIMER2_INTERRUPT
    895          
    896          
    897          
    898          
    899          //-----------------------------------------------------------------------------------------------------

   \                                 In  segment CODE, align 2, keep-with-next
    900          void CPlatform::Init(void)
   \                     ??Init_3:
    901          {
    902              SystemTickInit();
   \   00000000   ....               RCALL   ??SystemTickInit
    903              StatusLedSetPinOutput();
   \   00000002   ....               RCALL   ??StatusLedSetPinOutput
    904              TxLedSetPinOutput();
   \   00000004   ....               RCALL   ??TxLedSetPinOutput
    905          }
   \   00000006   9508               RET

   \                                 In  segment INTVEC, offset 0x2, root
   \                     `??SIG_INT0::??INTVEC 2`:
   \   00000002   ....               RJMP    ??SIG_INT0

   \                                 In  segment INTVEC, offset 0xe, root
   \                     `??SystemTickInterrupt::??INTVEC 14`:
   \   0000000E   ....               RJMP    ??SystemTickInterrupt

   \                                 In  segment INTVEC, offset 0x22, root
   \                     `??SIG_SPI_STC::??INTVEC 34`:
   \   00000022   ....               RJMP    ??SIG_SPI_STC

   \                                 In  segment INTVEC, offset 0x24, root
   \                     `??SIG_UART0_RECV::??INTVEC 36`:
   \   00000024   ....               RJMP    ??SIG_UART0_RECV

   \                                 In  segment INTVEC, offset 0x26, root
   \                     `??SIG_UART0_DATA::??INTVEC 38`:
   \   00000026   ....               RJMP    ??SIG_UART0_DATA

   \                                 In  segment INTVEC, offset 0x28, root
   \                     `??SIG_UART0_TXC::??INTVEC 40`:
   \   00000028   ....               RJMP    ??SIG_UART0_TXC

   \                                 In  segment CODE, align 2, keep-with-next
   \   __version_3 CAdc &CAdc::new CAdc()
   \                     `??new CAdc`:
   \   00000000   E002               LDI     R16, 2
   \   00000002   E010               LDI     R17, 0
   \   00000004   ....               RCALL   `??operator new`
   \   00000006   2F20               MOV     R18, R16
   \   00000008   2B21               OR      R18, R17
   \   0000000A   F011               BREQ    `??new CAdc_1`
   \   0000000C   ....               RCALL   ??CAdc
   \   0000000E   9508               RET
   \                     `??new CAdc_1`:
   \   00000010   E000               LDI     R16, 0
   \   00000012   E010               LDI     R17, 0
   \   00000014   9508               RET

   \                                 In  segment CODE, align 2, keep-with-next
   \   __version_3 CUart &CUart::new CUart()
   \                     `??new CUart`:
   \   00000000   E10F               LDI     R16, 31
   \   00000002   E010               LDI     R17, 0
   \   00000004   ....               RCALL   `??operator new`
   \   00000006   2F20               MOV     R18, R16
   \   00000008   2B21               OR      R18, R17
   \   0000000A   F011               BREQ    `??new CUart_2`
   \   0000000C   ....               RCALL   ??CUart
   \   0000000E   9508               RET
   \                     `??new CUart_2`:
   \   00000010   E000               LDI     R16, 0
   \   00000012   E010               LDI     R17, 0
   \   00000014   9508               RET

   \                                 In  segment CODE, align 2, keep-with-next
   \   __version_3 CUart &CUart::new CUart(uint8_t volatile *, uint8_t volatile *, uint8_t volatile *, uint8_t volatile *, uint8_t volatile *, uint8_t volatile *, uint8_t volatile *, uint8_t, uint8_t volatile *, uint8_t)
   \                     `??new CUart_1`:
   \   00000000   ....               RCALL   ?PROLOGUE16_L09
   \   00000002                      REQUIRE ?Register_R4_is_cg_reg
   \   00000002                      REQUIRE ?Register_R5_is_cg_reg
   \   00000002                      REQUIRE ?Register_R6_is_cg_reg
   \   00000002                      REQUIRE ?Register_R7_is_cg_reg
   \   00000002                      REQUIRE ?Register_R8_is_cg_reg
   \   00000002                      REQUIRE ?Register_R9_is_cg_reg
   \   00000002                      REQUIRE ?Register_R10_is_cg_reg
   \   00000002                      REQUIRE ?Register_R11_is_cg_reg
   \   00000002                      REQUIRE ?Register_R12_is_cg_reg
   \   00000002                      REQUIRE ?Register_R13_is_cg_reg
   \   00000002                      REQUIRE ?Register_R14_is_cg_reg
   \   00000002                      REQUIRE ?Register_R15_is_cg_reg
   \   00000002   0158               MOVW    R11:R10, R17:R16
   \   00000004   0179               MOVW    R15:R14, R19:R18
   \   00000006   016A               MOVW    R13:R12, R21:R20
   \   00000008   014B               MOVW    R9:R8, R23:R22
   \   0000000A   8868               LDD     R6, Y+16
   \   0000000C   8879               LDD     R7, Y+17
   \   0000000E   884A               LDD     R4, Y+18
   \   00000010   885B               LDD     R5, Y+19
   \   00000012   89AC               LDD     R26, Y+20
   \   00000014   89BD               LDD     R27, Y+21
   \   00000016   898F               LDD     R24, Y+23
   \   00000018   8D98               LDD     R25, Y+24
   \   0000001A   E10F               LDI     R16, 31
   \   0000001C   E010               LDI     R17, 0
   \   0000001E   ....               RCALL   `??operator new`
   \   00000020   2F20               MOV     R18, R16
   \   00000022   2B21               OR      R18, R17
   \   00000024   F099               BREQ    `??new CUart_3`
   \   00000026   8D29               LDD     R18, Y+25
   \   00000028   932A               ST      -Y, R18
   \   0000002A   939A               ST      -Y, R25
   \   0000002C   938A               ST      -Y, R24
   \   0000002E   8D29               LDD     R18, Y+25
   \   00000030   932A               ST      -Y, R18
   \   00000032   93BA               ST      -Y, R27
   \   00000034   93AA               ST      -Y, R26
   \   00000036   925A               ST      -Y, R5
   \   00000038   924A               ST      -Y, R4
   \   0000003A   927A               ST      -Y, R7
   \   0000003C   926A               ST      -Y, R6
   \   0000003E   929A               ST      -Y, R9
   \   00000040   928A               ST      -Y, R8
   \   00000042   01B6               MOVW    R23:R22, R13:R12
   \   00000044   01A7               MOVW    R21:R20, R15:R14
   \   00000046   0195               MOVW    R19:R18, R11:R10
   \   00000048   ....               RCALL   ??CUart_1
   \   0000004A   C002               RJMP    `??new CUart_4`
   \                     `??new CUart_3`:
   \   0000004C   E000               LDI     R16, 0
   \   0000004E   E010               LDI     R17, 0
   \                     `??new CUart_4`:
   \   00000050   E1EA               LDI     R30, 26
   \   00000052   ....               RJMP    ?EPILOGUE_B16_L09

   \                                 In  segment CODE, align 2, keep-with-next
   \   __version_3 CEeprom &CEeprom::new CEeprom()
   \                     `??new CEeprom`:
   \   00000000   E002               LDI     R16, 2
   \   00000002   E010               LDI     R17, 0
   \   00000004   ....               RCALL   `??operator new`
   \   00000006   2F20               MOV     R18, R16
   \   00000008   2B21               OR      R18, R17
   \   0000000A   F011               BREQ    `??new CEeprom_1`
   \   0000000C   ....               RCALL   ??CEeprom
   \   0000000E   9508               RET
   \                     `??new CEeprom_1`:
   \   00000010   E000               LDI     R16, 0
   \   00000012   E010               LDI     R17, 0
   \   00000014   9508               RET

   \                                 In  segment CODE, align 2, keep-with-next
   \   __version_3 CSpi &CSpi::new CSpi()
   \                     `??new CSpi`:
   \   00000000   E002               LDI     R16, 2
   \   00000002   E010               LDI     R17, 0
   \   00000004   ....               RCALL   `??operator new`
   \   00000006   2F20               MOV     R18, R16
   \   00000008   2B21               OR      R18, R17
   \   0000000A   F011               BREQ    `??new CSpi_1`
   \   0000000C   ....               RCALL   ??CSpi
   \   0000000E   9508               RET
   \                     `??new CSpi_1`:
   \   00000010   E000               LDI     R16, 0
   \   00000012   E010               LDI     R17, 0
   \   00000014   9508               RET

   \                                 In  segment CODE, align 2, keep-with-next
   \   __version_3 CPlatform &CPlatform::new CPlatform()
   \                     `??new CPlatform`:
   \   00000000   E002               LDI     R16, 2
   \   00000002   E010               LDI     R17, 0
   \   00000004   ....               RCALL   `??operator new`
   \   00000006   2F20               MOV     R18, R16
   \   00000008   2B21               OR      R18, R17
   \   0000000A   F011               BREQ    `??new CPlatform_1`
   \   0000000C   ....               RCALL   ??CPlatform
   \   0000000E   9508               RET
   \                     `??new CPlatform_1`:
   \   00000010   E000               LDI     R16, 0
   \   00000012   E010               LDI     R17, 0
   \   00000014   9508               RET
    906          
    907          
    908          
    909          //
    910          //        PUSH R16
    911          //        LDS     R16, ??m_uiExchangeByte
    912          //        OUT     0x0F, R16
    913          //        POP R16
    914          //
    915          //        ST      -Y, R31
    916          //          CFI R31 Frame(CFA_Y, -1)
    917          //          CFI CFA_Y Y+1
    918          //        ST      -Y, R30
    919          //          CFI R30 Frame(CFA_Y, -2)
    920          //          CFI CFA_Y Y+2
    921          //        ST      -Y, R19
    922          //          CFI R19 Frame(CFA_Y, -3)
    923          //          CFI CFA_Y Y+3
    924          //        ST      -Y, R18
    925          //          CFI R18 Frame(CFA_Y, -4)
    926          //          CFI CFA_Y Y+4
    927          //        ST      -Y, R17
    928          //          CFI R17 Frame(CFA_Y, -5)
    929          //          CFI CFA_Y Y+5
    930          //        ST      -Y, R16
    931          //          CFI R16 Frame(CFA_Y, -6)
    932          //          CFI CFA_Y Y+6
    933          //        IN      R19, 0x3F
    934          //;        LDS     R16, ??m_uiExchangeByte
    935          //;        OUT     0x2E, R16
    936          //        IN      R16, 0x2E
    937          //        STS     ??m_uiExchangeByte, R16
    938          //        LDS     R16, ??m_nuiBuffByteCounter
    939          //        LDS     R17, (??m_nuiBuffByteCounter + 1)
    940          //        CPI     R16, 0
    941          //        LDI     R18, 1
    942          //        CPC     R17, R18
    943          //        BRCC    ??SIG_SPI_STC_1
    944          //        LDI     R30, LOW(??m_nuiBuffByteCounter)
    945          //        LDI     R31, (??m_nuiBuffByteCounter) >> 8
    946          //        LD      R16, Z
    947          //        LDD     R17, Z+1
    948          //        SUBI    R16, 255
    949          //        SBCI    R17, 255
    950          //        ST      Z, R16
    951          //        STD     Z+1, R17
    952          //        LDI     R16, 1
    953          //        STS     ??m_bfByteIsReceived, R16
    954          //        RJMP    ??SIG_SPI_STC_2
    955          //??SIG_SPI_STC_1:
    956          //        LDI     R16, 1
    957          //        STS     ??m_bfRxBuffOverflow, R16
    958          //        LDI     R16, 1
    959          //        STS     ??m_bfByteIsReceived, R16
    960          //??SIG_SPI_STC_2:
    961          //        OUT     0x3F, R19
    962          //        LD      R16, Y+
    963          //          CFI R16 SameValue
    964          //          CFI CFA_Y Y+5
    965          //        LD      R17, Y+
    966          //          CFI R17 SameValue
    967          //          CFI CFA_Y Y+4
    968          //        LD      R18, Y+
    969          //          CFI R18 SameValue
    970          //          CFI CFA_Y Y+3
    971          //        LD      R19, Y+
    972          //          CFI R19 SameValue
    973          //          CFI CFA_Y Y+2
    974          //        LD      R30, Y+
    975          //          CFI R30 SameValue
    976          //          CFI CFA_Y Y+1
    977          //        LD      R31, Y+
    978          //          CFI R31 SameValue
    979          //          CFI CFA_Y Y+0
    980          //        RETI

   Maximum stack usage in bytes:

   CSTACK RSTACK Function
   ------ ------ --------
      0      2   CAdc::CAdc()
      0      2   CAdc::ChannelSelect(uint8_t)
      0      2   CAdc::Disable()
      0      2   CAdc::Enable()
      0      2   CAdc::Init()
      0      2   CAdc::Start()
      0      2   CAdc::StartSingle()
      0      2   CAdc::Stop()
      0      2   CAdc::new CAdc()
        0      2   -> CAdc::CAdc()
        0      2   -> operator new(unsigned int)
      2      2   CAdc::~CAdc()
        2      2   -> operator delete(void *)
      0      2   CEeprom::CEeprom()
      2      2   CEeprom::Read(uint8_t *, uint16_t, uint16_t)
        2      2   -> CEeprom::ReadByte(uint16_t)
      0      2   CEeprom::ReadByte(uint16_t)
      2      2   CEeprom::Write(uint16_t, uint8_t *, uint16_t)
        2      2   -> CEeprom::WriteByte(uint16_t, uint8_t)
      0      2   CEeprom::WriteByte(uint16_t, uint8_t)
      0      2   CEeprom::new CEeprom()
        0      2   -> CEeprom::CEeprom()
        0      2   -> operator new(unsigned int)
      2      2   CEeprom::~CEeprom()
        2      2   -> operator delete(void *)
      0      2   CMvsn21::FlowControlSet(uint8_t)
      0      2   CMvsn21::MeasureFlowControlSet(uint8_t)
      0      2   CPlatform::CPlatform()
      0      2   CPlatform::IncrementSystemTick()
      0      2   CPlatform::Init()
        0      2   -> CPlatform::StatusLedSetPinOutput()
        0      2   -> CPlatform::TxLedSetPinOutput()
        0      2   -> SystemTickInit()
      0      2   CPlatform::Int0InterruptDisable()
      0      2   CPlatform::Int0InterruptEnable()
      0      2   CPlatform::StatusLedSetPinOutput()
      0      2   CPlatform::TxLedOff()
      0      2   CPlatform::TxLedOn()
      0      2   CPlatform::TxLedSetPinOutput()
      0      2   CPlatform::new CPlatform()
        0      2   -> CPlatform::CPlatform()
        0      2   -> operator new(unsigned int)
      2      2   CPlatform::~CPlatform()
        2      2   -> operator delete(void *)
      0      2   CSpi::CSpi()
      0      2   CSpi::DataExchangeInProgressClear()
      0      2   CSpi::DataExchangeInProgressSet()
      0      2   CSpi::DataExchangeIsOccurSet()
      0      2   CSpi::Disable()
      0      2   CSpi::Enable()
      0      2   CSpi::Exchange(uint16_t)
      0      2   CSpi::Exchange(uint8_t *, uint8_t *, uint16_t)
      0      2   CSpi::Init(uint8_t *, uint8_t *)
      0      2   CSpi::Read(uint8_t *, uint16_t, uint16_t)
      0      2   CSpi::RecvInterruptHandler()
      0      2   CSpi::Reset()
      0      2   CSpi::Write(uint16_t, uint8_t *, uint16_t)
      0      2   CSpi::new CSpi()
        0      2   -> CSpi::CSpi()
        0      2   -> operator new(unsigned int)
      2      2   CSpi::~CSpi()
        2      2   -> operator delete(void *)
      0      2   CUart::CUart()
     22      2   CUart::CUart(uint8_t volatile *, uint8_t volatile *, uint8_t volatile *, uint8_t volatile *, uint8_t volatile *, uint8_t volatile *, uint8_t volatile *, uint8_t, uint8_t volatile *, uint8_t)
       22      2 ?S_SHL_L02
      4      2   CUart::Disable()
      4      2   CUart::Enable()
     18      2   CUart::Init(uint32_t, uint8_t, uint8_t, uint8_t, uint8_t *, uint8_t *)
       18      2 ?L_EC_MUL_L03
       18      2 ?UL_DIVMOD_L03
      2      2   CUart::Read()
      2      2   CUart::Read(uint8_t *)
      4      2   CUart::RecvInterruptHandler()
      0      2   CUart::Reset()
      4      2   CUart::Rs485RtsOff()
        4      2 ?S_SHL_L02
      4      2   CUart::Rs485RtsOn()
        4      2 ?S_SHL_L02
      4      2   CUart::TxcInterruptHandler()
        4      2   -> CUart::Rs485RtsOff()
      4      2   CUart::UdreInterruptHandler()
      4      2   CUart::Write(uint8_t *, uint16_t)
        4      2   -> CUart::Rs485RtsOn()
      0      2   CUart::new CUart()
        0      2   -> CUart::CUart()
        0      2   -> operator new(unsigned int)
     38      2   CUart::new CUart(uint8_t volatile *, uint8_t volatile *, uint8_t volatile *, uint8_t volatile *, uint8_t volatile *, uint8_t volatile *, uint8_t volatile *, uint8_t, uint8_t volatile *, uint8_t)
       26      2   -> CUart::CUart(uint8_t volatile *, uint8_t volatile *, uint8_t volatile *, uint8_t volatile *, uint8_t volatile *, uint8_t volatile *, uint8_t volatile *, uint8_t, uint8_t volatile *, uint8_t)
       26      2   -> operator new(unsigned int)
      2      2   CUart::~CUart()
        2      2   -> operator delete(void *)
     15      2   SIG_INT0()
       15      2   -> CMvsn21::FlowControlSet(uint8_t)
       15      2   -> CMvsn21::MeasureFlowControlSet(uint8_t)
       15      2   -> CPlatform::TxLedOff()
       15      2   -> CPlatform::TxLedOn()
       15      2   -> CSpi::DataExchangeInProgressClear()
       15      2   -> CSpi::DataExchangeInProgressSet()
       15      2   -> CSpi::DataExchangeIsOccurSet()
       15      2   -> CSpi::Disable()
       15      2   -> CSpi::Enable()
      7      2   SIG_SPI_STC()
      8      2   SIG_UART0_DATA()
        8      2   -> CUart::UdreInterruptHandler()
      9      2   SIG_UART0_RECV()
        9      2   -> CUart::RecvInterruptHandler()
      7      2   SIG_UART0_TXC()
        7      2   -> CUart::TxcInterruptHandler()
      0      2   SystemTickInit()
     15      2   SystemTickInterrupt()
       15      2   -> CPlatform::IncrementSystemTick()
      0      2   delay_mins(uint16_t)
      0      2   delay_ms(uint16_t)
      0      2   delay_s(uint16_t)


   Segment part sizes:

   Bytes  Function/Label
   -----  --------------
      12  CAdc::CAdc()
      32  CAdc::ChannelSelect(uint8_t)
      22  CAdc::Disable()
      22  CAdc::Enable()
      26  CAdc::Init()
      12  CAdc::Start()
      22  CAdc::StartSingle()
      12  CAdc::Stop()
       1  CAdc::m_fbMeasureIsComlete
      22  CAdc::new CAdc()
      22  CAdc::~CAdc()
      12  CEeprom::CEeprom()
      34  CEeprom::Read(uint8_t *, uint16_t, uint16_t)
      26  CEeprom::ReadByte(uint16_t)
      40  CEeprom::Write(uint16_t, uint8_t *, uint16_t)
      26  CEeprom::WriteByte(uint16_t, uint8_t)
      22  CEeprom::new CEeprom()
      22  CEeprom::~CEeprom()
       6  CMvsn21::FlowControlSet(uint8_t)
       6  CMvsn21::MeasureFlowControlSet(uint8_t)
      12  CPlatform::CPlatform()
      18  CPlatform::IncrementSystemTick()
       8  CPlatform::Init()
       4  CPlatform::Int0InterruptDisable()
      24  CPlatform::Int0InterruptEnable()
       4  CPlatform::StatusLedSetPinOutput()
       4  CPlatform::TxLedOff()
       4  CPlatform::TxLedOn()
       4  CPlatform::TxLedSetPinOutput()
       2  CPlatform::m_pxSpi
       2  CPlatform::m_pxUart0
       2  CPlatform::m_pxUart1
       2  CPlatform::m_uiSystemTick
      22  CPlatform::new CPlatform()
       1  CPlatform::uiSlaveSelectIsHigh
      22  CPlatform::~CPlatform()
      12  CSpi::CSpi()
       8  CSpi::DataExchangeInProgressClear()
       8  CSpi::DataExchangeInProgressSet()
       8  CSpi::DataExchangeIsOccurSet()
      10  CSpi::Disable()
      10  CSpi::Enable()
      90  CSpi::Exchange(uint16_t)
      90  CSpi::Exchange(uint8_t *, uint8_t *, uint16_t)
      30  CSpi::Init(uint8_t *, uint8_t *)
       6  CSpi::Read(uint8_t *, uint16_t, uint16_t)
       2  CSpi::RecvInterruptHandler()
      62  CSpi::Reset()
       6  CSpi::Write(uint16_t, uint8_t *, uint16_t)
      16  CSpi::m_auiSpiRxBuffer
      16  CSpi::m_auiSpiTxBuffer
       1  CSpi::m_bfByteIsReceived
       1  CSpi::m_bfByteIsTransmited
       1  CSpi::m_bfDataExchangeInProgress
       1  CSpi::m_bfDataExchangeIsOccur
       1  CSpi::m_bfRxBuffOverflow
       2  CSpi::m_nuiBuffByteCounter
       2  CSpi::m_puiRxBuffer
       2  CSpi::m_puiTxBuffer
       1  CSpi::m_uiExchangeByte
       2  CSpi::m_uiReceivedByteCounter
      22  CSpi::new CSpi()
      22  CSpi::~CSpi()
      12  CUart::CUart()
     170  CUart::CUart(uint8_t volatile *, uint8_t volatile *, uint8_t volatile *, uint8_t volatile *, uint8_t volatile *, uint8_t volatile *, uint8_t volatile *, uint8_t, uint8_t volatile *, uint8_t)
      30  CUart::Disable()
      30  CUart::Enable()
     204  CUart::Init(uint32_t, uint8_t, uint8_t, uint8_t, uint8_t *, uint8_t *)
      76  CUart::Read()
      80  CUart::Read(uint8_t *)
      76  CUart::RecvInterruptHandler()
      30  CUart::Reset()
      28  CUart::Rs485RtsOff()
      26  CUart::Rs485RtsOn()
      70  CUart::TxcInterruptHandler()
      96  CUart::UdreInterruptHandler()
      98  CUart::Write(uint8_t *, uint16_t)
      22  CUart::new CUart()
      84  CUart::new CUart(uint8_t volatile *, uint8_t volatile *, uint8_t volatile *, uint8_t volatile *, uint8_t volatile *, uint8_t volatile *, uint8_t volatile *, uint8_t, uint8_t volatile *, uint8_t)
      22  CUart::~CUart()
     144  SIG_INT0()
       2  SIG_INT0()::??INTVEC 2
     158  SIG_SPI_STC()
       2  SIG_SPI_STC()::??INTVEC 34
      48  SIG_UART0_DATA()
       2  SIG_UART0_DATA()::??INTVEC 38
      52  SIG_UART0_RECV()
       2  SIG_UART0_RECV()::??INTVEC 36
      44  SIG_UART0_TXC()
       2  SIG_UART0_TXC()::??INTVEC 40
      38  SystemTickInit()
      68  SystemTickInterrupt()
       2  SystemTickInterrupt()::??INTVEC 14
       1  _A_ACSR
       2  _A_ADC
       1  _A_ADCSRA
       1  _A_ADCSRB
       1  _A_ADMUX
       1  _A_ASSR
       1  _A_CLKPR
       1  _A_DDRB
       1  _A_DDRC
       1  _A_DDRD
       1  _A_DIDR0
       1  _A_DIDR1
       2  _A_EEAR
       1  _A_EECR
       1  _A_EEDR
       1  _A_EICRA
       1  _A_EIFR
       1  _A_EIMSK
       1  _A_GPIOR0
       1  _A_GPIOR1
       1  _A_GPIOR2
       1  _A_GTCCR
       2  _A_ICR1
       1  _A_MCUCR
       1  _A_MCUSR
       1  _A_OCR0A
       1  _A_OCR0B
       2  _A_OCR1A
       2  _A_OCR1B
       1  _A_OCR2A
       1  _A_OCR2B
       1  _A_OSCCAL
       1  _A_PCICR
       1  _A_PCIFR
       1  _A_PCMSK0
       1  _A_PCMSK1
       1  _A_PCMSK2
       1  _A_PINB
       1  _A_PINC
       1  _A_PIND
       1  _A_PORTB
       1  _A_PORTC
       1  _A_PORTD
       1  _A_PRR
       1  _A_SMCR
       2  _A_SP
       1  _A_SPCR
       1  _A_SPDR
       1  _A_SPMCSR
       1  _A_SPSR
       1  _A_SREG
       1  _A_TCCR0A
       1  _A_TCCR0B
       1  _A_TCCR1A
       1  _A_TCCR1B
       1  _A_TCCR1C
       1  _A_TCCR2A
       1  _A_TCCR2B
       1  _A_TCNT0
       2  _A_TCNT1
       1  _A_TCNT2
       1  _A_TIFR0
       1  _A_TIFR1
       1  _A_TIFR2
       1  _A_TIMSK0
       1  _A_TIMSK1
       1  _A_TIMSK2
       1  _A_TWAMR
       1  _A_TWAR
       1  _A_TWBR
       1  _A_TWCR
       1  _A_TWDR
       1  _A_TWSR
       2  _A_UBRR0
       1  _A_UCSR0A
       1  _A_UCSR0B
       1  _A_UCSR0C
       1  _A_UDR0
       1  _A_WDTCSR
      38  delay_mins(uint16_t)
      30  delay_ms(uint16_t)
      34  delay_s(uint16_t)
      16  -- Other

 
    87 bytes in segment ABSOLUTE
 2 718 bytes in segment CODE
     6 bytes in segment INITTAB
    12 bytes in segment INTVEC
    10 bytes in segment NEAR_F
    56 bytes in segment NEAR_Z
 
 2 648 bytes of CODE memory (+ 98 bytes shared)
    56 bytes of DATA memory (+ 87 bytes shared)

Errors: none
Warnings: 5
